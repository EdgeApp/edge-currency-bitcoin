{"version":3,"file":"tests.cjs.js","sources":["../src/utils/require.js","../src/utils/uintArray.js","../src/utils/hash.js","../src/utils/base.js","../src/networks/baseInfo.js","../src/networks/bitcoin.js","../src/core/networkInfo.js","../src/utils/formatter.js","../src/utils/secp256k1.js","../src/core/privateKey.js","../test/core/privateKey.js","../src/hd/common.js","../src/utils/utils.js","../src/hd/path.js","../src/hd/xpriv.js","../src/hd/xpub.js","../src/hd/xkey.js","../test/hd/xkey.js","../test/hd/xpriv.js","../test/hd/xpub.js","../rollup.config.js","../test/rollup.config.js","../test/utils/base.js","../test/utils/fixtures/jsonSearch.js","../src/utils/jsonSearch.js","../test/utils/jsonSearch.js","../src/utils/persister.js","../test/utils/persister.js"],"sourcesContent":["const lazyHandler = activeModule => ({\n  get: (target, prop, receiver) => {\n    // If already loaded return the loaded module\n    if (activeModule) return activeModule[prop]\n    // Try to inject the loaded module\n    if (prop === 'inject') {\n      return loadedModule => {\n        activeModule = loadedModule\n        for (const prop in target) {\n          target[prop].inject(activeModule[prop])\n        }\n      }\n    }\n    // Create a new child proxy if this prop not yet exists\n    if (!target[prop]) {\n      target[prop] = new Proxy(function (...args) {\n        if (!activeModule) target()\n        return activeModule[prop](...args)\n      }, lazyHandler())\n    }\n    return target[prop]\n  }\n})\n\nexport const lazify = unsafeModule => {\n  const parentModule = function (injectedModule = {}, loadUnsafe = true) {\n    const defaultModule = loadUnsafe ? unsafeModule() : {}\n    const loadedModule = Object.assign(defaultModule, injectedModule)\n    parentProxy.inject(loadedModule)\n  }\n  const parentProxy = new Proxy(parentModule, lazyHandler())\n  return parentProxy\n}\n","// @flow\n\nexport const isHexString = (hex: string) =>\n  typeof hex === 'string' && /^[0-9a-f]*$/i.test(hex)\n\nexport const toUint8Array = (hexString: string): Uint8Array => {\n  if (!isHexString(hexString)) {\n    throw new Error(`${hexString} is Not a Hex string`)\n  }\n  if (hexString.length % 2 !== 0) hexString = `0${hexString}`\n  const hex = hexString.match(/.{1,2}/g) || []\n  const bytes = hex.map(byte => parseInt(byte, 16))\n  return new Uint8Array(bytes)\n}\n\nexport const fromUint8Array = (bytes: Uint8Array): string =>\n  bytes.reduce((str, byte) => str + byte.toString(16).padStart(2, '0'), '')\n","// @flow\n\nimport { type Hashes } from '../../types/utils.js'\nimport { lazify } from './require.js'\nimport { fromUint8Array, toUint8Array } from './uintArray.js'\n\nexport const hashjs: Hashes<Uint8Array> = (lazify(() =>\n  require('hash.js')\n): any)\n\nexport const digest = (hash: Function) => (data: string) => {\n  const uintArray = toUint8Array(data)\n  const rawRes = hash()\n    .update(uintArray)\n    .digest()\n  const resArray = new Uint8Array(rawRes)\n  return fromUint8Array(resArray)\n}\n\nexport const digestHmac = (hmac: Function, hash: Function) => (\n  key: string,\n  data: string\n) => {\n  const uintKey = toUint8Array(key)\n  const hmacHash = () => hmac(hash, uintKey)\n  return digest(hmacHash)(data)\n}\n\nexport const sha256 = digest(hashjs.sha256)\nexport const sha512 = digest(hashjs.sha512)\nexport const ripemd160 = digest(hashjs.ripemd160)\nexport const sha512Hmac = digestHmac(hashjs.hmac, hashjs.sha512)\n\nexport const hash256 = (data: string) => sha256(sha256(data))\nexport const hash160 = (data: string) => ripemd160(sha256(data))\n","// @flow\n\nimport { Buffer } from 'buffer'\n\nimport basex from 'base-x'\n\nimport {\n  type Alphabet,\n  type BaseCheck,\n  type BaseDecoder,\n  type Bases,\n  type HashFunction\n} from '../../types/utils.js'\nimport { hash256 } from './hash.js'\n\n// The default ALPHABETS, the name of the base codec will be the alphabet's length\nexport const ALPHABETS: Array<Alphabet> = [\n  '01',\n  '01234567',\n  '0123456789a',\n  '0123456789abcdef',\n  '0123456789ABCDEFGHJKMNPQRSTVWXYZ',\n  '0123456789abcdefghijklmnopqrstuvwxyz',\n  '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz',\n  '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ',\n  'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n]\n\nexport const createCheckSumBase = (\n  base: BaseDecoder,\n  hashFunc?: HashFunction<string>\n): BaseDecoder => ({\n  encode: (hexStr: string): string => {\n    const checksum = (hashFunc || hash256)(hexStr)\n    const checkHex = `${hexStr}${checksum.slice(0, 8)}`\n    return base.encode(checkHex)\n  },\n  decode: (baseString: string): string => {\n    const hexStr = base.decode(baseString)\n    const payload = hexStr.slice(0, -8)\n    const newChecksum = (hashFunc || hash256)(payload)\n    const checksum = hexStr.slice(-8)\n    if (newChecksum.startsWith(checksum)) return payload\n    throw new Error('Invalid checksum')\n  }\n})\n\nexport const createHexEncoder = (\n  base: BaseDecoder,\n  hashFunc?: HashFunction<string>\n): BaseCheck => {\n  const newBase = { ...base }\n  const encode: (buf: Buffer) => string = newBase.encode\n  const decode: (str: string) => Buffer = newBase.decode\n  newBase.encode = a => encode(Buffer.from(a, 'hex'))\n  newBase.decode = a => decode(a).toString('hex')\n  return { ...newBase, check: createCheckSumBase(newBase, hashFunc) }\n}\n\nexport const base: Bases = ALPHABETS.reduce((decoders, alphabet) => {\n  const baseDecoder = createHexEncoder(basex(alphabet))\n  return { ...decoders, [alphabet.length]: baseDecoder }\n}, {})\n","// @flow\n\nimport { type NetworkInfo, type HDPathsSetting } from '../../types/core'\nimport { base } from '../utils/base.js'\nimport { hash256 } from '../utils/hash.js'\n\n// TODO - Actually get bech32\nconst bech32 = base['58'].check\nconst base58 = base['58'].check\n\nconst HDPaths: HDPathsSetting = {\n  '32': {\n    scriptType: 'P2PKH',\n    xpriv: { prefixHex: 0x0488ade4, prefixStr: 'xprv', decoder: { ...base58, base: 'xprv' } },\n    xpub: { prefixHex: 0x0488b21e, prefixStr: 'xpub', decoder: { ...base58, base: 'xpub' } },\n    address: { prefixHex: 0x80, prefixStr: '1', decoder: { ...base58, base: '1' } }\n  },\n  '44': {\n    scriptType: 'P2PKH',\n    xpriv: { prefixHex: 0x0488ade4, prefixStr: 'xprv', decoder: { ...base58, base: 'xprv' } },\n    xpub: { prefixHex: 0x0488b21e, prefixStr: 'xpub', decoder: { ...base58, base: 'xpub' } },\n    address: { prefixHex: 0x80, prefixStr: '1', decoder: { ...base58, base: '1' } }\n  },\n  '49': {\n    scriptType: 'P2WPKH-P2SH',\n    xpriv: { prefixHex: 0x049d7878, prefixStr: 'yprv', decoder: base58 },\n    xpub: { prefixHex: 0x049d7cb2, prefixStr: 'ypub', decoder: base58 },\n    address: { prefixHex: 0x05, prefixStr: '3', decoder: base58 }\n  },\n  '84': {\n    scriptType: 'P2WPKH',\n    xpriv: { prefixHex: 0x04b2430c, prefixStr: 'zprv', decoder: base58 },\n    xpub: { prefixHex: 0x04b24746, prefixStr: 'zpub', decoder: base58 },\n    address: { prefixHex: -1, prefixStr: 'bc', decoder: bech32 }\n  }\n}\n\nexport const main: NetworkInfo = {\n  coinType: 0,\n  wif: {\n    prefixHex: 0x80,\n    prefixStr: '1',\n    decoder: base['58'].check\n  },\n  HDPaths,\n  DefaultHDPath: 44,\n  txHash: hash256,\n  sigHash: (str: Buffer) => Buffer.from(hash256(str.toString('hex')), 'hex')\n}\n","// @flow\n\nexport const main = { DefaultHDPath: 84 }\n\nexport const testnet = {\n  coinType: 1,\n  wif: 0xef,\n  HDPaths: {\n    '32': {\n      xpriv: {\n        prefix: 0x04358394,\n        stringPrefix: 'tprv'\n      },\n      xpub: {\n        prefix: 0x043587cf,\n        stringPrefix: 'tpub'\n      },\n      address: 0x6f\n    },\n    '44': {\n      xpriv: {\n        prefix: 0x04358394,\n        stringPrefix: 'tprv'\n      },\n      xpub: {\n        prefix: 0x043587cf,\n        stringPrefix: 'tpub'\n      },\n      address: 0x6f\n    },\n    '49': {\n      xpriv: {\n        prefix: 0x04358394,\n        stringPrefix: 'tprv'\n      },\n      xpub: {\n        prefix: 0x043587cf,\n        stringPrefix: 'tpub'\n      },\n      address: 0xc4\n    },\n    '84': {\n      xpriv: {\n        prefix: 0x04358394,\n        stringPrefix: 'tprv'\n      },\n      xpub: {\n        prefix: 0x043587cf,\n        stringPrefix: 'tpub'\n      },\n      address: 'tb'\n    }\n  }\n}\n","// @flow\nimport { type BaseDecoder } from '../../types/utils.js'\nimport {\n  type HDPathSetting,\n  type NetworkInfo,\n  type NetworkInfos,\n  type NewNetworks\n} from '../../types/core.js'\nimport { main } from '../networks/baseInfo.js'\nimport * as Networks from '../networks/networks.js'\n\nexport const createInfo = (info: $Shape<NetworkInfo>): NetworkInfo => {\n  const newNetwork: NetworkInfo = ({}: any)\n\n  for (const set in main) {\n    const mainSet = main[set]\n    const infoSet = info[set]\n\n    if (Array.isArray(mainSet)) {\n      newNetwork[set] = (infoSet || [])\n        .concat(mainSet)\n        .filter((v, i, s) => s.indexOf(v) === i)\n    } else if (typeof mainSet === 'object') {\n      newNetwork[set] = { ...mainSet, ...(infoSet || {}) }\n    } else if (typeof infoSet !== 'undefined') {\n      newNetwork[set] = infoSet\n    } else newNetwork[set] = mainSet\n  }\n\n  return newNetwork\n}\n\nexport const createNetworks = (newInfos: NewNetworks) => {\n  const networks = { main }\n  for (const network in newInfos) {\n    const infos = newInfos[network]\n    for (const networkType in infos) {\n      const partialInfo = infos[networkType]\n      let name = network\n      if (networkType !== 'main') name += networkType.toLowerCase()\n      networks[name] = createInfo(partialInfo)\n    }\n  }\n  return networks\n}\n\nexport const networks: NetworkInfos = createNetworks(Networks)\n\nexport const addNetworks = (newInfos: NewNetworks) =>\n  Object.assign(networks, createNetworks(newInfos))\n// /////////////////\n// /////////////////\n// /////////////////\n// /////////////////\n// /////////////////\n// /////////////////\n// /////////////////\n// /////////////////\n// /////////////////\n// /////////////////\n// /////////////////\n// /////////////////\n// /////////////////\n// /////////////////\nexport const getHDSetting = (value: any, network?: string): HDPathSetting => {\n  // If no network is specified, check all available networks\n  if (!network) {\n    for (const network in networks) {\n      try {\n        return getHDSetting(value, network)\n      } catch (e) {}\n    }\n    throw new Error('Unknown prefix')\n  }\n\n  const { HDPaths } = networks[network]\n  for (const purpose in HDPaths) {\n    const hdPath = HDPaths[purpose]\n    for (const key in hdPath) {\n      const setting = hdPath[key]\n      // checking if address that has legacy\n      if (Array.isArray(setting)) {\n        return setting.find(\n          ({ prefix, stringPrefix }) =>\n            prefix === value || stringPrefix === value\n        )\n      }\n\n      // checking if xpub, xpriv, or address\n      if (\n        typeof setting === 'object' &&\n        (setting.prefix === value || setting.stringPrefix === value)\n      ) {\n        return hdPath\n      }\n\n      // if scriptType or purpose\n      if (setting === value) return hdPath\n    }\n  }\n  throw new Error(`Wrong value: ${value} for network: ${network}`)\n}\n\nexport const getDecoder = (network: string, value: any): BaseDecoder => {\n  const hdPath = getHDSetting(value, network)\n  for (const key in hdPath) {\n    const decoder = hdPath[key]\n\n    if (Array.isArray(decoder)) {\n      return decoder.find(\n        ({ prefix, stringPrefix }) =>\n          prefix === value || stringPrefix === value\n      )\n    }\n\n    if (decoder.prefix === value || decoder.stringPrefix === value) {\n      return decoder.decoder\n    }\n  }\n  throw new Error(`Wrong value: ${value} for network: ${network}`)\n}\n","// @flow\n\nimport { type FunctionFormatterOptions } from '../../types/utils.js'\nimport { fromUint8Array, toUint8Array } from './uintArray.js'\n\nexport const formatFunction = (\n  func: Function,\n  opts?: FunctionFormatterOptions = {}\n) => {\n  const { numParams = 1, encoder, results = [], sync } = opts\n  const { input = toUint8Array, output = fromUint8Array } = encoder || {}\n\n  const encode = (i: number, cps = a => a) => {\n    if (!i--) return cps\n    const newCps = (p: any) => {\n      p[i] = input(p[i])\n      return cps(p)\n    }\n    return encode(i, newCps)\n  }\n\n  const paramEncoder = encode(numParams)\n\n  let encodeResult = (res: any) => output(res)\n  if (!results) {\n    encodeResult = (res: any) => res\n  } else if (results.length) {\n    encodeResult = (res: any) => {\n      for (const param of results) {\n        res[param] = output(res[param])\n      }\n      return res\n    }\n  }\n\n  let waitResult = async (res: any) => {\n    res = await res\n    return encodeResult(res)\n  }\n  if (sync) waitResult = (res: any) => encodeResult(res)\n\n  return (...params: any): any => {\n    const result = func(...paramEncoder(params))\n    return waitResult(result)\n  }\n}\n\nexport const formatByteSize = (\n  originalByteSize: number,\n  newByteSize: number,\n  pad: boolean = originalByteSize > newByteSize\n) => (data: Array<number>) => {\n  let acc = 0\n  let bits = 0\n  const ret = []\n  const maxNum = (1 << newByteSize) - 1\n  for (let p = 0; p < data.length; ++p) {\n    const value = data[p]\n    if (value < 0 || value >> originalByteSize !== 0) {\n      throw new Error('Wrong bit value')\n    }\n    acc = (acc << originalByteSize) | value\n    bits += originalByteSize\n    while (bits >= newByteSize) {\n      bits -= newByteSize\n      ret.push((acc >> bits) & maxNum)\n    }\n  }\n  if (pad && bits > 0) {\n    ret.push((acc << (newByteSize - bits)) & maxNum)\n  } else if (\n    bits >= originalByteSize ||\n    (acc << (newByteSize - bits)) & maxNum\n  ) {\n    throw new Error('Wrong bit value')\n  }\n  return ret\n}\n","// @flow\n\nimport { type Secp256k1 } from '../../types/utils.js'\nimport { formatFunction } from './formatter.js'\nimport { lazify } from './require.js'\n\nexport const secp256k1: Secp256k1<Uint8Array> = (lazify(() =>\n  require('secp256k1')\n): any)\n\nconst encoder = {\n  input: a => Buffer.from(a, 'hex'),\n  output: a => a.toString('hex')\n}\n\nexport const publicKeyCreate = formatFunction(secp256k1.publicKeyCreate, {\n  encoder\n})\nexport const signatureNormalize = formatFunction(secp256k1.signatureNormalize, {\n  encoder\n})\nexport const signatureExport = formatFunction(secp256k1.signatureExport, {\n  encoder\n})\nexport const privateKeyTweakAdd = formatFunction(secp256k1.privateKeyTweakAdd, {\n  encoder,\n  numParams: 2\n})\nexport const publicKeyTweakAdd = formatFunction(secp256k1.publicKeyTweakAdd, {\n  encoder,\n  numParams: 2\n})\nexport const verify = formatFunction(secp256k1.verify, {\n  encoder,\n  numParams: 3,\n  results: null\n})\nexport const signature = formatFunction(secp256k1.sign, {\n  encoder,\n  numParams: 2,\n  results: ['signature']\n})\n\nexport const sign = (message: string, privateKey: string) =>\n  signature(message, privateKey)\n    .then(({ signature }) => signature)\n    .then(signatureNormalize)\n    .then(signatureExport)\n","// @flow\n\nimport { networks } from './networkInfo.js'\nimport {\n  publicKeyCreate,\n  sign as Sign,\n  verify as Verify\n} from '../../src/utils/secp256k1.js'\n\nexport const fromWIF = (\n  wif: string,\n  network: string = 'main'\n): { privateKey: string, compress: boolean } => {\n  const { prefixHex, decoder } = networks[network].wif\n  const keyHex = decoder.decode(wif)\n  if (parseInt(keyHex.slice(0, 2), 16) !== prefixHex) {\n    throw new Error(\n      `Unknown key prefix ${keyHex.slice(0, 2)} for network ${network}`\n    )\n  }\n  const privateKey = keyHex.slice(2, 66)\n  let compress = false\n  if (keyHex.length >= 68) {\n    if (parseInt(keyHex.slice(66, 68), 16) !== 1) {\n      throw new Error(`Unknown compression flag ${keyHex.slice(66, 68)}`)\n    }\n    compress = true\n  }\n  return { privateKey, compress }\n}\n\nexport const toWIF = (\n  privateKey: string,\n  network: string = 'main',\n  compress: boolean = true\n): string => {\n  if (privateKey.length !== 64) throw new Error(`Wrong key length`)\n  const { prefixHex, decoder } = networks[network].wif\n  const prefix = prefixHex.toString(16)\n  const compressFlag = compress ? '01' : ''\n  const hexKey = `${prefix}${privateKey}${compressFlag}`\n  return decoder.encode(hexKey)\n}\n\nexport const fromString = fromWIF\nexport const fromHex = toWIF\n\nexport const toPublic = async (\n  privateKey: string,\n  compress: boolean = true\n): Promise<string> => publicKeyCreate(privateKey, compress)\n\nexport const toSignature = async (privateKey: string, msg: string): Promise<string> => Sign(msg, privateKey)\n\nexport const verify = async (\n  msg: string,\n  signature: string,\n  publicKey?: string,\n  privateKey?: string\n): Promise<Boolean> => {\n  if (!publicKey) {\n    if (!privateKey) throw new Error('Cannot verify without keys.')\n    publicKey = await publicKeyCreate(privateKey, true)\n  }\n  const verified = await Verify(msg, signature, publicKey)\n  return verified\n}\n","// @flow\n\nimport { assert } from 'chai'\nimport { describe, it } from 'mocha'\n\nimport { fromWIF, toPublic, toWIF } from '../../src/core/privateKey.js'\n\nimport keys from './fixtures.json'\n\nconst network = 'main'\n\ndescribe('Testing HD Key', function () {\n  keys.forEach(test => {\n    it(`Creating Private Key from WIF ${test[0]}`, function () {\n      const wif = test[0]\n      const { privateKey, compress } = fromWIF(wif, network)\n      assert.equal(compress, test[1])\n      assert.equal(privateKey, test[2])\n    })\n\n    it(`Creating Public Key from Private Key ${test[1]}`, async function () {\n      const compress = test[1]\n      const privateKey = test[2]\n      const publicKey = await toPublic(privateKey, compress)\n      assert.equal(publicKey, test[3])\n    })\n\n    it(`Creating WIF from from Private Key ${test[1]}`, function () {\n      const compress = test[1]\n      const privateKey = test[2]\n      const wif = toWIF(privateKey, network, compress)\n      assert.equal(wif, test[0])\n    })\n  })\n})\n","// @flow\n\nimport { type ExtendedData } from '../../types/hd.js'\nimport { getHDSetting } from '../core/networkInfo.js'\n\nexport const HARDENED = 0x80000000\nexport const SEED = '426974636f696e2073656564'\nexport const MAX_INDEX = 0xffffffff\nexport const MAX_DEPTH = 0xff\nexport const TWEAK_OUT_OF_RANGE_ERROR = 'tweak out of range'\nexport const XKEY_DEFAULTS = {\n  childNumber: 0,\n  parentFingerPrint: 0,\n  depth: 0\n}\n\nexport const dataToHex = (data: ExtendedData): string =>\n  data.version.toString(16).padStart(8, '0') +\n  data.depth.toString(16).padStart(2, '0') +\n  data.parentFingerPrint.toString(16).padStart(8, '0') +\n  data.childNumber.toString(16).padStart(8, '0') +\n  data.chainCode\n\nexport const dataFromHex = (keyHex: string, network?: string): ExtendedData => {\n  // Check the entire hex length\n  if (keyHex.length !== 156) throw new Error('Wrong key length')\n\n  // Check that the key prefix matches the network's prefix if given a network\n  const version = parseInt(keyHex.slice(0, 8), 16)\n  if (network) {\n    const setting = getHDSetting(version, network)\n    if (!setting) throw new Error('Wrong extended key version for network')\n  }\n  return {\n    version,\n    depth: parseInt(keyHex.slice(9, 10), 16),\n    parentFingerPrint: parseInt(keyHex.slice(10, 18), 16),\n    childNumber: parseInt(keyHex.slice(18, 26), 16),\n    chainCode: keyHex.slice(26, 90)\n  }\n}\n","// @flow\n\nexport const isNumeric = (str: string) => /^-{0,1}\\d+$/.test(str)\n","// @flow\n\nimport { type HDPath } from '../../types/hd.js'\nimport { HARDENED, MAX_INDEX } from './common.js'\nimport { isNumeric } from '../utils/utils.js'\n\nexport const fromNumber = (index: number, harden: boolean = false): string => {\n  if (index > MAX_INDEX) throw new Error(`Index out of range: ${index}`)\n  // If it's a harden index, we need to set the flag and normalize the index\n  if (index >= HARDENED) {\n    harden = true\n    index = index - HARDENED\n  }\n  return harden ? `${index}'` : `${index}`\n}\n\nexport const toNumber = (index: string): number => {\n  // Check for hardened flag\n  const hardened = index[index.length - 1] === '\\''\n  // If hardened, we need to remove the harden flag\n  if (hardened) index = index.slice(0, -1)\n  // Index must be a number\n  if (!isNumeric(index)) throw new Error(`Index must be a number: ${index}`)\n  let indexNumber = parseInt(index)\n  // If hardened, we need to add the HARDENED param to the index\n  if (hardened) indexNumber += HARDENED\n\n  if (indexNumber > MAX_INDEX) throw new Error(`Index out of range: ${indexNumber}`)\n  return indexNumber\n}\n\nexport const toString = (path: HDPath): string => {\n  try {\n    return 'm/' + path.map(a => fromNumber(a)).join('/')\n  } catch (e) {\n    e.message = `Bad path: ${JSON.stringify(path)}\\n\\t${e.message}`\n    throw e\n  }\n}\n\nexport const fromString = (path: string, root: string = 'm'): HDPath => {\n  try {\n    const pathArr = path.split('/')\n    const pathRoot = pathArr.shift()\n    if (pathRoot !== root) throw new Error(`Unknown path root: '${pathRoot}', expected: '${root}'`)\n    return pathArr.map(toNumber)\n  } catch (e) {\n    e.message = `Bad path: ${path}\\n\\t${e.message}`\n    throw e\n  }\n}\n","// @flow\n\nimport * as API from '../../types/publicAPI.js'\nimport { getHDSetting, getDecoder } from '../core/networkInfo.js'\nimport { type ExtendedPrivateKey } from '../../types/hd.js'\nimport { dataFromHex, dataToHex, XKEY_DEFAULTS, HARDENED, SEED, MAX_INDEX, MAX_DEPTH, TWEAK_OUT_OF_RANGE_ERROR } from './common.js'\nimport { sha512Hmac, hash160 } from '../utils/hash.js'\nimport * as Path from './path.js'\nimport { toPublic as toPublicKey } from '../core/privateKey.js'\nimport { privateKeyTweakAdd } from '../utils/secp256k1.js'\n\nexport const fromXPriv: API.FromXKey<ExtendedPrivateKey> = (key, network) => {\n  const { privateKey, chainCode } = key\n  if (!privateKey) throw new Error('Missing private key')\n  if (!chainCode) return fromSeed(privateKey)\n  const fullKey = { ...XKEY_DEFAULTS, ...key }\n  if (typeof fullKey.version !== 'number') {\n    const { xpriv: { prefixHex } } = getHDSetting('xprv', network)\n    fullKey.version = prefixHex\n  }\n  return fullKey\n}\n\nexport const fromSeed: API.FromSeed<ExtendedPrivateKey> = (seed, network, version = 'xprv') => {\n  const hash = sha512Hmac(SEED, seed)\n  const { xpriv: { prefixHex } } = getHDSetting(version, network)\n  if (typeof prefixHex !== 'number') throw new Error('')\n  return fromXPriv({\n    privateKey: hash.slice(0, 64),\n    chainCode: hash.slice(64, 128),\n    version: prefixHex\n  }, network)\n}\n\nexport const fromHex: API.FromHex<ExtendedPrivateKey> = (keyHex, network) => {\n  // Get the byte which tells us what type of key we're expecting\n  const headerByte = parseInt(keyHex.slice(90, 92), 16)\n  if (headerByte !== 0) throw new Error('Wrong private key header')\n\n  return {\n    privateKey: keyHex.slice(92, 156),\n    ...dataFromHex(keyHex, network)\n  }\n}\n\nexport const fromString: API.FromString<ExtendedPrivateKey> = (xKey, network = 'main') => {\n  const keyHex = getDecoder(network, xKey.slice(0, 4)).decode(xKey)\n  return fromHex(keyHex, network)\n}\n\nexport const toIndex: API.ToIndex<ExtendedPrivateKey> = async (key, index, hardended = false) => {\n  try {\n    const { depth, version, privateKey, chainCode } = key\n    if (index > MAX_INDEX) throw new Error('Index out of range.')\n    if (depth >= MAX_DEPTH) throw new Error('Depth too high.')\n    const publicKey = key.publicKey || await toPublicKey(privateKey, true)\n    // If the index is non-hardended, set 'tweakKey' to be the publicKey, otherwise the privateKey\n    let tweakKey = index < HARDENED || hardended ? publicKey : `00${privateKey}`\n    tweakKey += index.toString(16).padStart(8, '0')\n    const hash = sha512Hmac(chainCode, tweakKey)\n\n    const childKey = await privateKeyTweakAdd(privateKey, hash.slice(0, 64))\n    const parentFingerPrint = publicKey ? hash160(publicKey).slice(0, 8) : 0\n\n    return {\n      privateKey: childKey,\n      childNumber: index,\n      chainCode: hash.slice(64, 128),\n      depth: depth + 1,\n      parentFingerPrint: parseInt(parentFingerPrint, 16),\n      version\n    }\n  } catch (e) {\n    if (!e.message.includes(TWEAK_OUT_OF_RANGE_ERROR)) throw e\n    return toIndex(key, index + 1)\n  }\n}\n\nexport const toPath: API.ToPath<ExtendedPrivateKey> = async (key, path) => {\n  if (typeof path === 'string') path = Path.fromString(path)\n  for (const index of path) {\n    key = await toIndex(key, index)\n  }\n  return key\n}\n\nexport const toHex: API.ToHex<ExtendedPrivateKey> = key => {\n  const { privateKey, publicKey, ...rest } = key\n  if (privateKey.length !== 64) throw new Error('Wrong private key length')\n  return dataToHex(rest) + `00${privateKey}`\n}\n\nexport const toString: API.ToString<ExtendedPrivateKey> = (hdKey, network = 'main') =>\n  getDecoder(network, hdKey.version).encode(toHex(hdKey))\n\nexport const toXPub: API.ToXPub<ExtendedPrivateKey> = async (hdKey, network) => {\n  const { privateKey, version, ...rest } = hdKey\n  const { xpub: { prefixHex } } = getHDSetting(hdKey.version, network)\n  const publicKey = hdKey.publicKey || await toPublicKey(privateKey, true)\n  return { publicKey, version: prefixHex, ...rest }\n}\n","// @flow\n\nimport * as API from '../../types/publicAPI.js'\nimport { type ExtendedPublicKey } from '../../types/hd.js'\nimport { getDecoder, getHDSetting } from '../core/networkInfo.js'\nimport { dataFromHex, dataToHex, XKEY_DEFAULTS, HARDENED, MAX_INDEX, MAX_DEPTH, TWEAK_OUT_OF_RANGE_ERROR } from './common.js'\nimport { sha512Hmac, hash160 } from '../utils/hash.js'\nimport { publicKeyTweakAdd } from '../utils/secp256k1.js'\nimport * as Path from './path.js'\n\nexport const fromXPub: API.FromXKey<ExtendedPublicKey> = (key, network) => {\n  const { publicKey, chainCode, ...rest } = key\n  if (!publicKey) throw new Error('Missing public key')\n  if (!chainCode) throw new Error('Missing chainCode')\n  const xKey = { ...XKEY_DEFAULTS, publicKey, chainCode, ...rest }\n  if (!xKey.version) {\n    const { xpub: { prefixHex } } = getHDSetting('xpub', network)\n    xKey.version = prefixHex\n  }\n  return xKey\n}\n\nexport const fromHex: API.FromHex<ExtendedPublicKey> = (keyHex, network) => {\n  // Get the byte which tells us what type of key we're expecting\n  const headerByte = parseInt(keyHex.slice(90, 92), 16)\n  if (headerByte !== 2 && headerByte !== 3) throw new Error('Wrong public key header')\n\n  return {\n    publicKey: keyHex.slice(90, 156),\n    ...dataFromHex(keyHex, network)\n  }\n}\n\nexport const fromString: API.FromString<ExtendedPublicKey> = (hdKey, network = 'main') => {\n  const keyHex = getDecoder(network, hdKey.slice(0, 4)).decode(hdKey)\n  return fromHex(keyHex, network)\n}\n\nexport const toIndex: API.ToIndex<ExtendedPublicKey> = async (key, index) => {\n  try {\n    const { depth, version, publicKey, chainCode } = key\n    if (index >= HARDENED) throw new Error('Cannot derive hardened index from a public key')\n    if (index > MAX_INDEX) throw new Error('Index out of range.')\n    if (depth >= MAX_DEPTH) throw new Error('Depth too high.')\n\n    const tweakKey = publicKey + index.toString(16).padStart(8, '0')\n    const hash = sha512Hmac(chainCode, tweakKey)\n    const childKey = await publicKeyTweakAdd(publicKey, hash.slice(0, 64))\n    const parentFingerPrint = hash160(publicKey).slice(0, 8)\n\n    return {\n      publicKey: childKey,\n      childNumber: index,\n      chainCode: hash.slice(64, 128),\n      depth: depth + 1,\n      parentFingerPrint: parseInt(parentFingerPrint, 16),\n      version\n    }\n  } catch (e) {\n    if (!e.message.includes(TWEAK_OUT_OF_RANGE_ERROR)) throw e\n    return toIndex(key, index + 1)\n  }\n}\n\nexport const toPath: API.ToPath<ExtendedPublicKey> = async (key, path) => {\n  if (typeof path === 'string') path = Path.fromString(path, 'M')\n  for (const index of path) {\n    key = await toIndex(key, index)\n  }\n  return key\n}\n\nexport const toHex: API.ToHex<ExtendedPublicKey> = ({ publicKey, ...rest }) =>\n  dataToHex(rest) + publicKey\n\nexport const toString: API.ToString<ExtendedPublicKey> = (key, network = 'main') =>\n  getDecoder(network, key.version).encode(toHex(key))\n","// @flow\n\nimport * as API from '../../types/publicAPI.js'\nimport { type ExtendedKey } from '../../types/hd.js'\nimport { getHDSetting } from '../core/networkInfo.js'\nimport * as XPriv from './xpriv.js'\nimport * as XPub from './xpub.js'\n\nexport const fromHex: API.FromHex<ExtendedKey> = (keyHex, network) => {\n  const headerByte = parseInt(keyHex.slice(90, 92), 16)\n  if (headerByte === 0) return XPriv.fromHex(keyHex, network)\n  else if (headerByte === 2 && headerByte === 3) return XPub.fromHex(keyHex, network)\n  throw new Error('Wrong key prefix')\n}\n\nexport const fromString: API.FromString<ExtendedKey> = (xKey, network = 'main') => {\n  const prefixStr = xKey.slice(0, 4)\n  const hdSetting = getHDSetting(prefixStr, network)\n  if (prefixStr === hdSetting.xpriv.prefixStr) {\n    return XPriv.fromString(xKey, network)\n  }\n  return XPub.fromString(xKey, network)\n}\n\nexport const fromSeed: API.FromSeed<ExtendedKey> = (...a) => XPriv.fromSeed(...a)\n\nconst keySelector = (privType: string, pubType: string = privType) =>\n  (key: ExtendedKey, ...params: any) => {\n    const { privateKey = null, publicKey = null, ...rest } = key\n    if (privateKey) {\n      return XPriv[privType]({ privateKey, ...rest }, ...params)\n    } else if (publicKey) return XPub[pubType]({ publicKey, ...rest }, ...params)\n    throw new Error('Must provide a key')\n  }\n\n// $FlowFixMe\nexport const fromXKey: API.FromXKey<ExtendedKey> = keySelector('fromXPriv', 'fromXPub')\nexport const toIndex: API.ToIndex<ExtendedKey> = keySelector('toIndex')\nexport const toPath: API.ToPath<ExtendedKey> = keySelector('toPath')\nexport const toString: API.ToString<ExtendedKey> = keySelector('toString')\nexport const toXPub: API.ToXPub<ExtendedKey> = keySelector('toXPub', 'fromXPub')\nexport const toHex: API.ToHex<ExtendedKey> = keySelector('toHex')\n","// @flow\n\nimport { assert } from 'chai'\nimport { describe, it } from 'mocha'\n\nimport * as XKey from '../../src/hd/xkey.js'\nimport * as Path from '../../src/hd/path.js'\nimport { HARDENED } from '../../src/hd/common.js'\nimport privateFixures from './fixtures/xpriv.json'\nimport publicFixures from './fixtures/xpub.json'\n\nlet { network } = privateFixures\n\ndescribe('Testing XKey Private Key', function () {\n  privateFixures.fromSeed.forEach(test => {\n    it(`Extended key from seed ${test[1]}`, function () {\n      const childKey = XKey.fromSeed(test[1], network)\n      const xkey = XKey.toString(childKey)\n      assert.deepEqual(xkey, test[2])\n    })\n  })\n\n  privateFixures.string.forEach(test => {\n    const base58Key = test[0]\n    const privateKey = {\n      privateKey: test[1],\n      version: test[2],\n      depth: test[3],\n      parentFingerPrint: test[4],\n      childNumber: test[5],\n      chainCode: test[6]\n    }\n\n    it(`XKey key from string: ${test[0]}`, function () {\n      const resultedXkey = XKey.fromString(base58Key, network)\n      assert.deepEqual(resultedXkey, privateKey)\n    })\n\n    it(`XKey key to string: ${test[1]}`, function () {\n      const resultedBase58Key = XKey.toString(privateKey, network)\n      assert.equal(resultedBase58Key, base58Key)\n    })\n  })\n\n  privateFixures.toIndex.forEach(test => {\n    it(`Deriving key ${test[0]} for index ${test[2]}`, async function () {\n      const privateKey = test[0]\n      const chainCode = test[1]\n      const index = test[2]\n      const publicKey = test[6]\n      const expectedChildKey = {\n        privateKey: test[3],\n        chainCode: test[4],\n        childNumber: test[5]\n      }\n      // $FlowFixMe\n      const xKey = XKey.fromXKey({ privateKey, chainCode, publicKey }, network)\n      // $FlowFixMe\n      const childKey = await XKey.toIndex(xKey, index)\n      assert.deepEqual({\n        privateKey: childKey.privateKey,\n        chainCode: childKey.chainCode,\n        childNumber: childKey.childNumber\n      }, expectedChildKey)\n    })\n  })\n\n  privateFixures.toPath1.forEach(test => {\n    it(`Deriving XKey key ${test[0]} from XKey Settings ${\n      test[3]\n    }`, async function () {\n      const xkey = test[0]\n      const parentKey = XKey.fromString(xkey, network)\n\n      let account = 0\n      let coinType = 0\n      let bips = test[2]\n      if (!bips) bips = [84]\n      if (test[1]) {\n        account = test[1][0]\n        coinType = test[1][1]\n      }\n      let testIndex = 3\n\n      const testPath = async (path) => {\n        const hdKey = await XKey.toPath(parentKey, path)\n        const xprivkey = XKey.toString(hdKey, network)\n        const pubKey = await XKey.toXPub(hdKey, network)\n        const xpubkey = XKey.toString(pubKey, network)\n        assert.equal(xprivkey, test[testIndex++], 'xpriv')\n        assert.equal(xpubkey, test[testIndex++], 'xpub')\n      }\n\n      for (const purpose of bips) {\n        if (purpose === 32) {\n          await testPath(['m', `${account}`, 0].join('/'))\n          testIndex -= 2\n          await testPath([account, 0])\n        } else {\n          await testPath(['m', `${purpose}'`, `${coinType}'`, `${account}'`, 0].join('/'))\n          await testPath(['m', `${purpose}'`, `${coinType}'`, `${account}'`, 1].join('/'))\n          testIndex -= 4\n          await testPath([purpose + HARDENED, coinType + HARDENED, account + HARDENED, 0])\n          await testPath([purpose + HARDENED, coinType + HARDENED, account + HARDENED, 1])\n        }\n      }\n    })\n  })\n\n  privateFixures.toPath2.forEach(test => {\n    it(`Deriving XKey key from xkey ${test[0]} with path ${\n      test[1]\n    }`, async function () {\n      const path = Path.fromString(test[1])\n      const parentKey = XKey.fromString(test[0])\n      let testIndex = 2\n      while (path.length) {\n        const hdKey = await XKey.toPath(parentKey, path)\n        const xprivkey = XKey.toString(hdKey, network)\n        const publicKey = await XKey.toXPub(hdKey, network)\n        const xpubkey = XKey.toString(publicKey, network)\n        assert.equal(xprivkey, test[testIndex][0], 'xpriv')\n        assert.equal(xpubkey, test[testIndex][1], 'xpub')\n        path.pop()\n        testIndex++\n      }\n    })\n  })\n})\n\nnetwork = publicFixures.network\n\ndescribe('Testing XKey Public Key', function () {\n  publicFixures.string.forEach(test => {\n    const base58Key = test[0]\n    const publicKey = {\n      publicKey: test[1],\n      version: test[2],\n      depth: test[3],\n      parentFingerPrint: test[4],\n      childNumber: test[5],\n      chainCode: test[6]\n    }\n\n    it(`XKey key from string: ${test[0]}`, function () {\n      const resultedXkey = XKey.fromString(base58Key, network)\n      assert.deepEqual(resultedXkey, publicKey)\n    })\n\n    it(`XKey key to string: ${test[1]}`, function () {\n      const resultedBase58Key = XKey.toString(publicKey, network)\n      assert.equal(resultedBase58Key, base58Key)\n    })\n  })\n\n  publicFixures.toIndex.forEach(test => {\n    it(`Deriving key ${test[0]} for index ${test[2]}`, async function () {\n      const publicKey = test[0]\n      const chainCode = test[1]\n      const index = test[2]\n      const expectedChildKey = {\n        publicKey: test[3],\n        chainCode: test[4],\n        childNumber: test[5]\n      }\n      const xKey = XKey.fromXKey({ publicKey, chainCode })\n      const childKey = await XKey.toIndex(xKey, index)\n      assert.deepEqual({\n        publicKey: childKey.publicKey,\n        chainCode: childKey.chainCode,\n        childNumber: childKey.childNumber\n      }, expectedChildKey)\n    })\n  })\n})\n","// @flow\n\nimport { assert } from 'chai'\nimport { describe, it } from 'mocha'\nimport * as XPriv from '../../src/hd/xpriv.js'\nimport * as Path from '../../src/hd/path.js'\nimport { HARDENED } from '../../src/hd/common.js'\nimport * as XPub from '../../src/hd/xpub.js'\nimport fixtures from './fixtures/xpriv.json'\n\nconst { network } = fixtures\n\ndescribe('Testing XPriv Key', function () {\n  fixtures.fromSeed.forEach(test => {\n    it(`XPriv from seed ${test[1]}`, function () {\n      const childKey = XPriv.fromSeed(test[1], network)\n      const xkey = XPriv.toString(childKey)\n      assert.deepEqual(xkey, test[2])\n    })\n  })\n\n  fixtures.string.forEach(test => {\n    const base58Key = test[0]\n    const privateKey = {\n      privateKey: test[1],\n      version: test[2],\n      depth: test[3],\n      parentFingerPrint: test[4],\n      childNumber: test[5],\n      chainCode: test[6]\n    }\n\n    it(`XPriv from string: ${test[0]}`, function () {\n      const resultedXkey = XPriv.fromString(base58Key, network)\n      assert.deepEqual(resultedXkey, privateKey)\n    })\n\n    it(`XPriv to string: ${test[1]}`, function () {\n      const resultedBase58Key = XPriv.toString(privateKey, network)\n      assert.equal(resultedBase58Key, base58Key)\n    })\n  })\n\n  fixtures.toIndex.forEach(test => {\n    it(`Deriving XPriv ${test[0]} for index ${test[2]}`, async function () {\n      const privateKey = test[0]\n      const chainCode = test[1]\n      const index = test[2]\n      const publicKey = test[6] || null\n      const expectedChildKey = {\n        privateKey: test[3],\n        chainCode: test[4],\n        childNumber: test[5]\n      }\n      const xKey = XPriv.fromXPriv({ privateKey, chainCode, publicKey })\n      const childKey = await XPriv.toIndex(xKey, index)\n      assert.deepEqual({\n        privateKey: childKey.privateKey,\n        chainCode: childKey.chainCode,\n        childNumber: childKey.childNumber\n      }, expectedChildKey)\n    })\n  })\n\n  fixtures.toPath1.forEach(test => {\n    it(`Deriving key ${test[0]} for bips ${test[2]}`, async function () {\n      const xkey = test[0]\n      const parentKey = XPriv.fromString(xkey, network)\n\n      let account = 0\n      let coinType = 0\n      let bips = test[2]\n      if (!bips) bips = [84]\n      if (test[1]) {\n        account = test[1][0]\n        coinType = test[1][1]\n      }\n      let testIndex = 3\n\n      const testPath = async (path) => {\n        const hdKey = await XPriv.toPath(parentKey, path)\n        const xprivkey = XPriv.toString(hdKey, network)\n        const pubKey = await XPriv.toXPub(hdKey)\n        const xpubkey = XPub.toString(pubKey, network)\n        assert.equal(xprivkey, test[testIndex++], 'xpriv')\n        assert.equal(xpubkey, test[testIndex++], 'xpub')\n      }\n\n      for (const purpose of bips) {\n        if (purpose === 32) {\n          await testPath(['m', `${account}`, 0].join('/'))\n          testIndex -= 2\n          await testPath([account, 0])\n        } else {\n          await testPath(['m', `${purpose}'`, `${coinType}'`, `${account}'`, 0].join('/'))\n          await testPath(['m', `${purpose}'`, `${coinType}'`, `${account}'`, 1].join('/'))\n          testIndex -= 4\n          await testPath([purpose + HARDENED, coinType + HARDENED, account + HARDENED, 0])\n          await testPath([purpose + HARDENED, coinType + HARDENED, account + HARDENED, 1])\n        }\n      }\n    })\n  })\n\n  fixtures.toPath2.forEach(test => {\n    it(`Deriving XPriv key from xkey ${test[0]} with path ${\n      test[1]\n    }`, async function () {\n      const path = Path.fromString(test[1])\n      const parentKey = XPriv.fromString(test[0])\n      let testIndex = 2\n      while (path.length) {\n        const hdKey = await XPriv.toPath(parentKey, path)\n        const xprivkey = XPriv.toString(hdKey, network)\n        const publicKey = await XPriv.toXPub(hdKey, network)\n        const xpubkey = XPub.toString(publicKey, network)\n        assert.equal(xprivkey, test[testIndex][0], 'xpriv')\n        assert.equal(xpubkey, test[testIndex][1], 'xpub')\n        path.pop()\n        testIndex++\n      }\n    })\n  })\n})\n","// @flow\n\nimport { assert } from 'chai'\nimport { describe, it } from 'mocha'\n\nimport * as XPub from '../../src/hd/xpub.js'\nimport fixtures from './fixtures/xpub.json'\n\nconst { network } = fixtures\n\ndescribe('Testing XPub', function () {\n  fixtures.string.forEach(test => {\n    const base58Key = test[0]\n    const publicKey = {\n      publicKey: test[1],\n      version: test[2],\n      depth: test[3],\n      parentFingerPrint: test[4],\n      childNumber: test[5],\n      chainCode: test[6]\n    }\n\n    it(`XPub from string: ${test[0]}`, function () {\n      const resultedXkey = XPub.fromString(base58Key, network)\n      assert.deepEqual(resultedXkey, publicKey)\n    })\n\n    it(`XPub to string: ${test[1]}`, function () {\n      const resultedBase58Key = XPub.toString(publicKey, network)\n      assert.equal(resultedBase58Key, base58Key)\n    })\n  })\n\n  fixtures.toIndex.forEach(test => {\n    it(`Deriving XPub ${test[0]} for index ${test[2]}`, async function () {\n      const publicKey = test[0]\n      const chainCode = test[1]\n      const index = test[2]\n      const expectedChildKey = {\n        publicKey: test[3],\n        chainCode: test[4],\n        childNumber: test[5]\n      }\n      const xKey = XPub.fromXPub({ publicKey, chainCode })\n      const childKey = await XPub.toIndex(xKey, index)\n      assert.deepEqual({\n        publicKey: childKey.publicKey,\n        chainCode: childKey.chainCode,\n        childNumber: childKey.childNumber\n      }, expectedChildKey)\n    })\n  })\n})\n","// @flow\n\nimport babel from 'rollup-plugin-babel'\nimport flowEntry from 'rollup-plugin-flow-entry'\nimport json from 'rollup-plugin-json'\n\nimport packageJson from './package.json'\n\nexport default {\n  input: './index.js',\n  external: [\n    ...Object.keys(packageJson.dependencies),\n    ...Object.keys(packageJson.devDependencies),\n    'bindings',\n    'elliptic'\n  ],\n  output: [\n    { file: packageJson.main, format: 'cjs', sourcemap: true },\n    { file: packageJson.module, format: 'es', sourcemap: true }\n  ],\n  plugins: [\n    json(),\n    babel({\n      babelrc: false,\n      presets: ['@babel/preset-flow'],\n      plugins: ['@babel/plugin-proposal-object-rest-spread']\n    }),\n    flowEntry()\n  ]\n}\n","import babel from 'rollup-plugin-babel'\nimport json from 'rollup-plugin-json'\nimport multiEntry from 'rollup-plugin-multi-entry'\n\nimport config from '../rollup.config.js'\n\nconst babelOptions = {\n  babelrc: false,\n  presets: ['@babel/preset-flow'],\n  plugins: ['@babel/plugin-proposal-object-rest-spread']\n}\n\nexport default {\n  external: config.external,\n  input: './test/**/*.js',\n  output: [\n    { file: 'build/tests.cjs.js', format: 'cjs', sourcemap: true },\n    { file: 'build/tests.js', format: 'es', sourcemap: true }\n  ],\n  plugins: [multiEntry(), json(), babel(babelOptions)]\n}\n","// @flow\n\nimport { assert } from 'chai'\nimport { describe, it } from 'mocha'\n\nimport { base } from '../../src/utils/base.js'\nimport { sha512Hmac } from '../../src/utils/hash.js'\nimport fixtures from './fixtures/base.json'\n\nconst data =\n  '00ab0063a7ea84d7c5f4a9ad8690c69b80a2d650343fbc9266b2d73c7b26bb2cc780000020'\nconst key = '485efe44bc445946b58ba03e8da75d5cf44fc9196eaa88204667629c4e04c38d'\nconst res =\n  '405fcc33d3f409f16571e19bd27053cd1d05e74df6eba0dc93c4c0a91599052429203b410e284513e14f67287843f91875bf69986f9cebf7037e79b0b13bbdbc'\n\nconst hash = sha512Hmac(key, data)\nassert.equal(hash, res)\n\nfor (const fixture in fixtures) {\n  describe(`Testing base ${fixture}`, function () {\n    const fixtureBase = base[fixture].check\n\n    fixtures[fixture].valid.forEach(({ string, payload }) => {\n      it(`Decode valid string: ${string}`, async function () {\n        const resultedPaylod = fixtureBase.decode(string)\n        assert.equal(resultedPaylod, payload)\n      })\n      it(`Encode valid payload: ${payload}`, async function () {\n        const resultedString = fixtureBase.encode(payload)\n        assert.equal(resultedString, string)\n      })\n    })\n\n    fixtures[fixture].invalid.forEach(({ string, exception }) => {\n      it(`Test invalid string: ${string}`, async function () {\n        try {\n          fixtureBase.decode(string)\n        } catch (e) {\n          assert.equal(e.message, exception)\n        }\n      })\n    })\n  })\n}\n","export const jsonObj = {\n  alpha: 1,\n  bravo: [1, 2, 3],\n  charlie: { delta: 1 },\n  india: {\n    kilo: 4,\n    lima: 4\n  },\n  uniform: {\n    kilo: 4,\n    lima: 4\n  },\n  echo: {\n    foxtrot: [1, 2, 3],\n    golf: {\n      india: {\n        kilo: 4,\n        lima: 4\n      },\n      juliet: {\n        kilo: 4,\n        lima: 5\n      },\n      mike: [\n        { kilo: 4 },\n        6,\n        { lima: 5 },\n        { lima: 6, kilo: 7 },\n        { charlie: { delta: 1 } },\n        { alpha: 1 },\n        [ 6, { lima: 5 }, 10 ]\n      ],\n      november: 8\n    }\n  }\n}\n\nexport const fixtures = [\n  [ [], [jsonObj] ],\n\n  [ ['$.lima'], [] ],\n\n  [ ['lima'], [] ],\n\n  [ ['$..lima'], [\n    jsonObj['india']['lima'],\n    jsonObj['uniform']['lima'],\n    jsonObj['echo']['golf']['india']['lima'],\n    jsonObj['echo']['golf']['juliet']['lima'],\n    jsonObj['echo']['golf']['mike'][2]['lima'],\n    jsonObj['echo']['golf']['mike'][3]['lima'],\n    jsonObj['echo']['golf']['mike'][6][1]['lima']\n  ] ],\n\n  [ ['$..charlie'], [\n    jsonObj['echo']['golf']['mike'][4]['charlie'],\n    jsonObj['charlie']\n  ] ],\n\n  [ ['$.charlie.delta', 1], [\n    jsonObj['charlie']\n  ] ],\n\n  [ ['charlie.delta', 1], [\n    jsonObj['charlie']\n  ] ],\n\n  [ ['echo.golf.india.kilo', 4], [\n    jsonObj['echo']['golf']['india']\n  ] ],\n\n  [ ['$.lima', 1], [] ],\n\n  [ ['lima', 1], [] ],\n\n  [ ['$..alpha', 1], [\n    jsonObj['echo']['golf']['mike'][5],\n    jsonObj\n  ] ],\n\n  [ ['$..alpha', 2], [] ],\n\n  [ ['$..charlie', 1], [] ],\n\n  [ ['$..delta', 1], [\n    jsonObj['charlie'],\n    jsonObj['echo']['golf']['mike'][4]['charlie']\n  ] ],\n\n  [ ['$..charlie.delta', 1], [\n    jsonObj['charlie'],\n    jsonObj['echo']['golf']['mike'][4]['charlie']\n  ] ],\n\n  [ ['$..india.kilo', 5], [] ],\n\n  [ ['$..india.lima', 5], [] ],\n\n  [ ['$..echo.golf.india.kilo', 4], [jsonObj['echo']['golf']['india']] ],\n\n  [ ['$..echo.golf.india.kilo', 5], [] ],\n\n  [ ['$..echo.golf.november', 8], [jsonObj['echo']['golf']] ],\n\n  [ ['$..india.kilo', 4], [\n    jsonObj['india'],\n    jsonObj['echo']['golf']['india']\n  ] ],\n\n  [ ['$..lima', 5], [\n    jsonObj['echo']['golf']['juliet'],\n    jsonObj['echo']['golf']['mike'][2],\n    jsonObj['echo']['golf']['mike'][6][1]\n  ] ],\n\n  [ ['$..lima', 4], [\n    jsonObj['india'],\n    jsonObj['uniform'],\n    jsonObj['echo']['golf']['india']\n  ] ],\n\n  [ ['$..kilo', 4], [\n    jsonObj['india'],\n    jsonObj['uniform'],\n    jsonObj['echo']['golf']['india'],\n    jsonObj['echo']['golf']['juliet'],\n    jsonObj['echo']['golf']['mike'][0]\n  ] ],\n\n  [ ['$..golf..delta', 1], [\n    jsonObj['echo']['golf']['mike'][4]['charlie']\n  ] ],\n\n  [ ['$..mike..delta', 1], [\n    jsonObj['echo']['golf']['mike'][4]['charlie']\n  ] ],\n\n  [ ['$..echo.foxtrot', 2], [\n    jsonObj['echo']['foxtrot']\n  ] ],\n\n  [ ['$..bravo', 0], [] ],\n\n  [ ['$..bravo', 1], [jsonObj['bravo']] ],\n\n  [ ['$..bravo'], [\n    jsonObj['bravo']\n  ] ],\n\n  [ ['bravo'], [\n    jsonObj['bravo']\n  ] ],\n\n  [ ['$.bravo'], [\n    jsonObj['bravo']\n  ] ],\n\n  [ ['$.echo.foxtrot'], [\n    jsonObj['echo']['foxtrot']\n  ] ],\n\n  [ ['$..mike'], [\n    jsonObj['echo']['golf']['mike']\n  ] ],\n\n  [ ['$.echo.golf.*'], [\n    jsonObj['echo']['golf']['india'],\n    jsonObj['echo']['golf']['juliet'],\n    jsonObj['echo']['golf']['mike'],\n    jsonObj['echo']['golf']['november']\n  ] ],\n\n  [ ['$.*'], [\n    jsonObj['alpha'],\n    jsonObj['bravo'],\n    jsonObj['charlie'],\n    jsonObj['india'],\n    jsonObj['uniform'],\n    jsonObj['echo']\n  ] ]\n]\n","// @flow\n\nimport {\n  type QueryParams,\n  type RecQueryParams\n} from '../../types/utils'\n\nconst searchRec = (query: RecQueryParams, jsonObj: any, parent: any): Array<any> => {\n  const { value, results, limit, path } = query\n\n  // If jsonObj is undefined or we have enough results we can return\n  if (\n    typeof jsonObj === 'undefined' ||\n    (limit && results.length >= limit)) return results\n\n  // If we ran out of path we check the following possiblities:\n  if (!path.length) {\n    // 1. If there is no value we can just return the object we are on\n    if (value === undefined) results.push(jsonObj)\n    // 2. If the value equals jsonObj, we need to return the parent\n    else if (value === jsonObj) results.push(parent)\n    // 3. If the jsonObj is an array, we need to decend one last time again\n    else if (Array.isArray(jsonObj)) {\n      jsonObj.forEach(c => searchRec(query, c, jsonObj))\n    }\n  } else if (typeof jsonObj === 'object') {\n    // Get a mutable version of path\n    let { path } = query\n\n    // If it's a recursive token, decent into all children\n    // And remove the recursive token from the path array\n    if (!path[0]) {\n      path = path.slice(1)\n      for (const key in jsonObj) {\n        searchRec(query, jsonObj[key], jsonObj)\n      }\n    }\n\n    const childKey = path[0]\n    const childQuery = { ...query, path: path.slice(1) }\n\n    if (childKey === '*') {\n      for (const key in jsonObj) {\n        searchRec(childQuery, jsonObj[key], jsonObj)\n      }\n    } else {\n      // Decent into child based on the first key in path\n      // With jsonObj as the parent and shifted path\n      searchRec(childQuery, jsonObj[childKey], jsonObj)\n    }\n  }\n\n  return results\n}\n\nexport const search = (query: QueryParams | string, jsonObj: any): Array<any> => {\n  if (typeof query === 'string') query = { path: query }\n  const { path: stringPath, ...rest } = query\n  // If nothing was requested, return the current object\n  if (!stringPath) return [jsonObj]\n  // Tokenize the search terms\n  const path = stringPath.split('.')\n  // Remove the root token if exists\n  if (path[0] === '$') path.shift()\n  // Call the recursive search\n  return searchRec({ ...rest, path, results: [] }, jsonObj)\n}\n","// @flow\n\nimport { assert } from 'chai'\nimport { describe, it } from 'mocha'\n\nimport { search } from '../../src/utils/jsonSearch.js'\nimport { fixtures, jsonObj } from './fixtures/jsonSearch.js'\n\ndescribe('Testing Json Search', function () {\n  fixtures.forEach(([ test, expected ]) => {\n    it(`Testing search with: ${JSON.stringify(test)} and no limit`, function () {\n      const searchParams = {\n        path: test[0],\n        value: test[1]\n      }\n      const results = search(searchParams, jsonObj)\n      assert.deepEqual(results, expected)\n    })\n\n    for (let i = 1; i <= expected.length; i++) {\n      it(`Testing search with: ${JSON.stringify(test)} and limit ${i}`, function () {\n        const searchParams = {\n          path: test[0],\n          value: test[1],\n          limit: i\n        }\n        const results = search(searchParams, jsonObj)\n        assert.deepEqual(results, expected.slice(0, i))\n      })\n    }\n  })\n})\n","// @flow\n\nimport {\n  type LoadFunc,\n  type PersistStatus,\n  type SaveFunc\n} from '../../types/utils.js'\n\nexport const persist = (\n  save: SaveFunc,\n  load: LoadFunc | Object,\n  delay: number = 100,\n  cache: Object = {},\n  data: Object = cache,\n  status: PersistStatus = {}\n) => {\n  return new Proxy((Object.assign(() => save(cache), data): any), {\n    apply: async (target, thisArgs, args) => {\n      const updateCache = newCache => {\n        cache = newCache\n        data = newCache\n        for (const key in target) {\n          if (data[key] === undefined) {\n            delete target[key]\n          }\n        }\n        Object.assign(target, newCache)\n      }\n\n      // Try to load the cache from disk in case it never happend before\n      if (!status.loaded) {\n        const rawData = typeof load === 'function' ? await load() : load\n        updateCache({ ...rawData, ...cache })\n        status.loaded = true\n      }\n\n      // Load/Stop the cache based on the argument\n      if (args && args.length) {\n        if (typeof args[0] === 'object') updateCache({ ...args[0] })\n        else if (args[0] === 'stop') {\n          if (status.saving) {\n            clearTimeout(status.saving)\n            status.saving = null\n          }\n          status.changed = false\n          await Reflect.apply(target, target, [])\n          return\n        }\n      }\n\n      // Stop looping in case nothing changed or we already have a save timer\n      if (!status.changed || status.saving) return\n\n      // If something changed, set flags and call save\n      status.changed = false\n\n      // Set save loop after the desired delay\n      status.saving = setTimeout(() => {\n        if (status.saving) {\n          clearTimeout(status.saving)\n          status.saving = null\n        }\n        Reflect.apply(thisArgs, thisArgs, [])\n      }, delay)\n\n      await Reflect.apply(target, target, [])\n    },\n    set: (target: any, prop: string, value: any, receiver: any) => {\n      // Only update/save if the param actually changed\n      if (data[prop] !== value) {\n        Reflect.set(data, prop, value)\n        Reflect.set(target, prop, value)\n        status.changed = true\n        if (!status.saving) Reflect.apply(receiver, receiver, [])\n      }\n      return true\n    },\n    get: (target: any, prop: string) => {\n      if (prop === 'status') return status\n      // Get the value\n      const value = Reflect.get(data, prop)\n      // Return any non object values\n      if (typeof value !== 'object') return value\n      // Create a proxy from the child to trimgger saves on the top parent\n      return persist(save, load, delay, cache, value, status)\n    }\n  })\n}\n","// @flow\n\nimport { assert } from 'chai'\nimport { after, before, describe, it } from 'mocha'\n\nimport { persist } from '../../src/utils/persister.js'\nimport fixtures from './fixtures/persistor.json'\n\nconst createSave = (expected: any, delay: number, cbs: any) => {\n  let saveAttempts = -1\n  let firstSaveTime = 0\n\n  return async cacheData => {\n    if (cbs.stop) return\n    cbs.e = new Error()\n\n    assert.notEqual(cacheData, expected)\n    assert.deepEqual(cacheData, expected)\n\n    saveAttempts++\n    if (!firstSaveTime) firstSaveTime = Date.now()\n    const saveTime = Date.now() - firstSaveTime\n\n    if (delay) {\n      const minDelay = delay * saveAttempts\n      assert.isAtLeast(saveTime, minDelay)\n    }\n\n    cbs.e = null\n    // console.log(saveTime, '- SAVE -', cacheData, saveAttempts)\n  }\n}\n\nconst cbs = {}\n\nfor (const test in fixtures) {\n  const testNum = test.replace('scenario ', '')\n  const { cache, delay, sets } = fixtures[test]\n  const expected = JSON.parse(JSON.stringify(cache || {}))\n  const save = createSave(expected, delay, cbs)\n  const load = testNum !== '1' ? (): Object => expected : cache\n  const persistedCache = persist(save, load, delay)\n\n  describe(`Testing persister for ${test} with delay of ${delay ||\n    100}ms`, function () {\n    this.timeout(0)\n    before('Test using cache as a function', async function () {\n      cbs.stop = false\n      await persistedCache({})\n      await persistedCache(cache)\n    })\n\n    sets.map(([param, value, saveTime], i) => {\n      it(`Set '${param}' to ${value}, after ${saveTime} milliseconds`, function (done) {\n        let child = persistedCache\n        let expectedChild = expected\n\n        param = param.split('.')\n        while (param.length > 1) {\n          const key = param.shift()\n          child = child[key]\n          expectedChild = expectedChild[key]\n        }\n\n        const key = param[0]\n        const interval = !i ? saveTime : saveTime - sets[i - 1][2]\n\n        setTimeout(() => {\n          expectedChild[key] = value\n          child[key] = value\n          assert.equal(expectedChild[key], child[key])\n          done(cbs.e)\n        }, interval)\n      })\n    })\n\n    after('Stop the caceh using cache as a function', async function () {\n      cbs.stop = true\n      await persistedCache('stop')\n    })\n  })\n}\n"],"names":["lazyHandler","activeModule","get","target","prop","receiver","loadedModule","inject","Proxy","args","lazify","unsafeModule","parentModule","injectedModule","loadUnsafe","defaultModule","Object","assign","parentProxy","isHexString","hex","test","toUint8Array","hexString","Error","length","match","bytes","map","byte","parseInt","Uint8Array","fromUint8Array","reduce","str","toString","padStart","hashjs","require","digest","hash","data","uintArray","rawRes","update","resArray","digestHmac","hmac","key","uintKey","hmacHash","sha256","ripemd160","sha512Hmac","sha512","hash256","hash160","ALPHABETS","createCheckSumBase","base","hashFunc","encode","hexStr","checksum","checkHex","slice","decode","baseString","payload","newChecksum","startsWith","createHexEncoder","newBase","a","Buffer","from","check","decoders","alphabet","baseDecoder","basex","bech32","base58","HDPaths","scriptType","xpriv","prefixHex","prefixStr","decoder","xpub","address","main","coinType","wif","DefaultHDPath","txHash","sigHash","testnet","prefix","stringPrefix","createInfo","info","newNetwork","set","mainSet","infoSet","Array","isArray","concat","filter","v","i","s","indexOf","createNetworks","newInfos","networks","network","infos","networkType","partialInfo","name","toLowerCase","Networks","getHDSetting","value","e","purpose","hdPath","setting","find","getDecoder","formatFunction","func","opts","numParams","encoder","results","sync","input","output","cps","newCps","p","paramEncoder","encodeResult","res","param","waitResult","params","result","secp256k1","publicKeyCreate","signatureNormalize","signatureExport","privateKeyTweakAdd","publicKeyTweakAdd","verify","signature","sign","fromWIF","keyHex","privateKey","compress","toWIF","compressFlag","hexKey","toPublic","describe","keys","forEach","it","assert","equal","publicKey","HARDENED","SEED","MAX_INDEX","MAX_DEPTH","TWEAK_OUT_OF_RANGE_ERROR","XKEY_DEFAULTS","childNumber","parentFingerPrint","depth","dataToHex","version","chainCode","dataFromHex","isNumeric","toNumber","index","hardened","indexNumber","fromString","path","root","pathArr","split","pathRoot","shift","message","fromXPriv","fromSeed","fullKey","seed","fromHex","headerByte","xKey","toIndex","hardended","toPublicKey","tweakKey","childKey","includes","toPath","Path","toHex","rest","hdKey","toXPub","fromXPub","hdSetting","XPriv","XPub","keySelector","privType","pubType","fromXKey","privateFixures","XKey","xkey","deepEqual","string","base58Key","resultedXkey","resultedBase58Key","expectedChildKey","toPath1","parentKey","account","bips","testIndex","testPath","xprivkey","pubKey","xpubkey","join","toPath2","pop","publicFixures","fixtures","external","packageJson","dependencies","devDependencies","file","format","sourcemap","module","plugins","json","babel","babelrc","presets","flowEntry","babelOptions","config","multiEntry","fixture","fixtureBase","valid","resultedPaylod","resultedString","invalid","exception","jsonObj","alpha","bravo","charlie","delta","india","kilo","lima","uniform","echo","foxtrot","golf","juliet","mike","november","searchRec","query","parent","limit","undefined","push","c","childQuery","search","stringPath","expected","JSON","stringify","searchParams","persist","save","load","delay","cache","status","apply","thisArgs","updateCache","newCache","loaded","rawData","saving","clearTimeout","changed","Reflect","setTimeout","createSave","cbs","saveAttempts","firstSaveTime","cacheData","stop","notEqual","Date","now","saveTime","minDelay","isAtLeast","testNum","replace","sets","parse","persistedCache","timeout","before","done","child","expectedChild","interval","after"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAMA,WAAW,GAAGC,YAAY,KAAK;EACnCC,GAAG,EAAE,CAACC,MAAD,EAASC,IAAT,EAAeC,QAAf,KAA4B;;QAE3BJ,YAAJ,EAAkB,OAAOA,YAAY,CAACG,IAAD,CAAnB,CAFa;;QAI3BA,IAAI,KAAK,QAAb,EAAuB;aACdE,YAAY,IAAI;QACrBL,YAAY,GAAGK,YAAf;;aACK,MAAMF,IAAX,IAAmBD,MAAnB,EAA2B;UACzBA,MAAM,CAACC,IAAD,CAAN,CAAaG,MAAb,CAAoBN,YAAY,CAACG,IAAD,CAAhC;;OAHJ;KAL6B;;;QAa3B,CAACD,MAAM,CAACC,IAAD,CAAX,EAAmB;MACjBD,MAAM,CAACC,IAAD,CAAN,GAAe,IAAII,KAAJ,CAAU,UAAU,GAAGC,IAAb,EAAmB;YACtC,CAACR,YAAL,EAAmBE,MAAM;eAClBF,YAAY,CAACG,IAAD,CAAZ,CAAmB,GAAGK,IAAtB,CAAP;OAFa,EAGZT,WAAW,EAHC,CAAf;;;WAKKG,MAAM,CAACC,IAAD,CAAb;;CApB4B,CAAhC;;AAwBA,AAAO,MAAMM,MAAM,GAAGC,YAAY,IAAI;QAC9BC,YAAY,GAAG,UAAUC,cAAc,GAAG,EAA3B,EAA+BC,UAAU,GAAG,IAA5C,EAAkD;UAC/DC,aAAa,GAAGD,UAAU,GAAGH,YAAY,EAAf,GAAoB,EAApD;UACML,YAAY,GAAGU,MAAM,CAACC,MAAP,CAAcF,aAAd,EAA6BF,cAA7B,CAArB;IACAK,WAAW,CAACX,MAAZ,CAAmBD,YAAnB;GAHF;;QAKMY,WAAW,GAAG,IAAIV,KAAJ,CAAUI,YAAV,EAAwBZ,WAAW,EAAnC,CAApB;SACOkB,WAAP;CAPK;;ACtBA,MAAMC,WAAW,GAAIC,GAAD,IACzB,OAAOA,GAAP,KAAe,QAAf,IAA2B,eAAeC,IAAf,CAAoBD,GAApB,CADtB;AAGP,AAAO,MAAME,YAAY,GAAIC,SAAD,IAAmC;MACzD,CAACJ,WAAW,CAACI,SAAD,CAAhB,EAA6B;UACrB,IAAIC,KAAJ,CAAW,GAAED,SAAU,sBAAvB,CAAN;;;MAEEA,SAAS,CAACE,MAAV,GAAmB,CAAnB,KAAyB,CAA7B,EAAgCF,SAAS,GAAI,IAAGA,SAAU,EAA1B;QAC1BH,GAAG,GAAGG,SAAS,CAACG,KAAV,CAAgB,SAAhB,KAA8B,EAA1C;QACMC,KAAK,GAAGP,GAAG,CAACQ,GAAJ,CAAQC,IAAI,IAAIC,QAAQ,CAACD,IAAD,EAAO,EAAP,CAAxB,CAAd;SACO,IAAIE,UAAJ,CAAeJ,KAAf,CAAP;CAPK;AAUP,AAAO,MAAMK,cAAc,GAAIL,KAAD,IAC5BA,KAAK,CAACM,MAAN,CAAa,CAACC,GAAD,EAAML,IAAN,KAAeK,GAAG,GAAGL,IAAI,CAACM,QAAL,CAAc,EAAd,EAAkBC,QAAlB,CAA2B,CAA3B,EAA8B,GAA9B,CAAlC,EAAsE,EAAtE,CADK;;ACTA,MAAMC,MAA0B,GAAI3B,MAAM,CAAC,MAChD4B,OAAO,CAAC,SAAD,CADwC,CAA1C;AAIP,AAAO,MAAMC,MAAM,GAAIC,IAAD,IAAqBC,IAAD,IAAkB;QACpDC,SAAS,GAAGpB,YAAY,CAACmB,IAAD,CAA9B;QACME,MAAM,GAAGH,IAAI,GAChBI,MADY,CACLF,SADK,EAEZH,MAFY,EAAf;QAGMM,QAAQ,GAAG,IAAId,UAAJ,CAAeY,MAAf,CAAjB;SACOX,cAAc,CAACa,QAAD,CAArB;CANK;AASP,AAAO,MAAMC,UAAU,GAAG,CAACC,IAAD,EAAiBP,IAAjB,KAAoC,CAC5DQ,GAD4D,EAE5DP,IAF4D,KAGzD;QACGQ,OAAO,GAAG3B,YAAY,CAAC0B,GAAD,CAA5B;;QACME,QAAQ,GAAG,MAAMH,IAAI,CAACP,IAAD,EAAOS,OAAP,CAA3B;;SACOV,MAAM,CAACW,QAAD,CAAN,CAAiBT,IAAjB,CAAP;CANK;AASP,AAAO,MAAMU,MAAM,GAAGZ,MAAM,CAACF,MAAM,CAACc,MAAR,CAArB;AACP,AACO,MAAMC,SAAS,GAAGb,MAAM,CAACF,MAAM,CAACe,SAAR,CAAxB;AACP,AAAO,MAAMC,UAAU,GAAGP,UAAU,CAACT,MAAM,CAACU,IAAR,EAAcV,MAAM,CAACiB,MAArB,CAA7B;AAEP,AAAO,MAAMC,OAAO,GAAId,IAAD,IAAkBU,MAAM,CAACA,MAAM,CAACV,IAAD,CAAP,CAAxC;AACP,AAAO,MAAMe,OAAO,GAAIf,IAAD,IAAkBW,SAAS,CAACD,MAAM,CAACV,IAAD,CAAP,CAA3C;;AClBA,MAAMgB,SAA0B,GAAG,CACxC,IADwC,EAExC,UAFwC,EAGxC,aAHwC,EAIxC,kBAJwC,EAKxC,kCALwC,EAMxC,sCANwC,EAOxC,4DAPwC,EAQxC,gEARwC,EASxC,kEATwC,CAAnC;AAYP,AAAO,MAAMC,kBAAkB,GAAG,CAChCC,IADgC,EAEhCC,QAFgC,MAGf;EACjBC,MAAM,EAAGC,MAAD,IAA4B;UAC5BC,QAAQ,GAAG,CAACH,QAAQ,IAAIL,OAAb,EAAsBO,MAAtB,CAAjB;UACME,QAAQ,GAAI,GAAEF,MAAO,GAAEC,QAAQ,CAACE,KAAT,CAAe,CAAf,EAAkB,CAAlB,CAAqB,EAAlD;WACON,IAAI,CAACE,MAAL,CAAYG,QAAZ,CAAP;GAJe;EAMjBE,MAAM,EAAGC,UAAD,IAAgC;UAChCL,MAAM,GAAGH,IAAI,CAACO,MAAL,CAAYC,UAAZ,CAAf;UACMC,OAAO,GAAGN,MAAM,CAACG,KAAP,CAAa,CAAb,EAAgB,CAAC,CAAjB,CAAhB;UACMI,WAAW,GAAG,CAACT,QAAQ,IAAIL,OAAb,EAAsBa,OAAtB,CAApB;UACML,QAAQ,GAAGD,MAAM,CAACG,KAAP,CAAa,CAAC,CAAd,CAAjB;QACII,WAAW,CAACC,UAAZ,CAAuBP,QAAvB,CAAJ,EAAsC,OAAOK,OAAP;UAChC,IAAI5C,KAAJ,CAAU,kBAAV,CAAN;;CAf8B,CAA3B;AAmBP,AAAO,MAAM+C,gBAAgB,GAAG,CAC9BZ,IAD8B,EAE9BC,QAF8B,KAGhB;QACRY,OAAO,qBAAQb,IAAR,CAAb;;QACME,MAA+B,GAAGW,OAAO,CAACX,MAAhD;QACMK,MAA+B,GAAGM,OAAO,CAACN,MAAhD;;EACAM,OAAO,CAACX,MAAR,GAAiBY,CAAC,IAAIZ,MAAM,CAACa,aAAM,CAACC,IAAP,CAAYF,CAAZ,EAAe,KAAf,CAAD,CAA5B;;EACAD,OAAO,CAACN,MAAR,GAAiBO,CAAC,IAAIP,MAAM,CAACO,CAAD,CAAN,CAAUtC,QAAV,CAAmB,KAAnB,CAAtB;;2BACYqC,OAAZ;IAAqBI,KAAK,EAAElB,kBAAkB,CAACc,OAAD,EAAUZ,QAAV;;CATzC;AAYP,AAAO,MAAMD,IAAW,GAAGF,SAAS,CAACxB,MAAV,CAAiB,CAAC4C,QAAD,EAAWC,QAAX,KAAwB;QAC5DC,WAAW,GAAGR,gBAAgB,CAACS,KAAK,CAACF,QAAD,CAAN,CAApC;2BACYD,QAAZ;KAAuBC,QAAQ,CAACrD,MAAV,GAAmBsD;;CAFhB,EAGxB,EAHwB,CAApB;;ACpDP,MAAME,MAAM,GAAGtB,IAAI,CAAC,IAAD,CAAJ,CAAWiB,KAA1B;AACA,MAAMM,MAAM,GAAGvB,IAAI,CAAC,IAAD,CAAJ,CAAWiB,KAA1B;AAEA,MAAMO,OAAuB,GAAG;QACxB;IACJC,UAAU,EAAE,OADR;IAEJC,KAAK,EAAE;MAAEC,SAAS,EAAE,UAAb;MAAyBC,SAAS,EAAE,MAApC;MAA4CC,OAAO,oBAAON,MAAP;QAAevB,IAAI,EAAE;;KAF3E;IAGJ8B,IAAI,EAAE;MAAEH,SAAS,EAAE,UAAb;MAAyBC,SAAS,EAAE,MAApC;MAA4CC,OAAO,oBAAON,MAAP;QAAevB,IAAI,EAAE;;KAH1E;IAIJ+B,OAAO,EAAE;MAAEJ,SAAS,EAAE,IAAb;MAAmBC,SAAS,EAAE,GAA9B;MAAmCC,OAAO,oBAAON,MAAP;QAAevB,IAAI,EAAE;;;GAL5C;QAOxB;IACJyB,UAAU,EAAE,OADR;IAEJC,KAAK,EAAE;MAAEC,SAAS,EAAE,UAAb;MAAyBC,SAAS,EAAE,MAApC;MAA4CC,OAAO,oBAAON,MAAP;QAAevB,IAAI,EAAE;;KAF3E;IAGJ8B,IAAI,EAAE;MAAEH,SAAS,EAAE,UAAb;MAAyBC,SAAS,EAAE,MAApC;MAA4CC,OAAO,oBAAON,MAAP;QAAevB,IAAI,EAAE;;KAH1E;IAIJ+B,OAAO,EAAE;MAAEJ,SAAS,EAAE,IAAb;MAAmBC,SAAS,EAAE,GAA9B;MAAmCC,OAAO,oBAAON,MAAP;QAAevB,IAAI,EAAE;;;GAX5C;QAaxB;IACJyB,UAAU,EAAE,aADR;IAEJC,KAAK,EAAE;MAAEC,SAAS,EAAE,UAAb;MAAyBC,SAAS,EAAE,MAApC;MAA4CC,OAAO,EAAEN;KAFxD;IAGJO,IAAI,EAAE;MAAEH,SAAS,EAAE,UAAb;MAAyBC,SAAS,EAAE,MAApC;MAA4CC,OAAO,EAAEN;KAHvD;IAIJQ,OAAO,EAAE;MAAEJ,SAAS,EAAE,IAAb;MAAmBC,SAAS,EAAE,GAA9B;MAAmCC,OAAO,EAAEN;;GAjBzB;QAmBxB;IACJE,UAAU,EAAE,QADR;IAEJC,KAAK,EAAE;MAAEC,SAAS,EAAE,UAAb;MAAyBC,SAAS,EAAE,MAApC;MAA4CC,OAAO,EAAEN;KAFxD;IAGJO,IAAI,EAAE;MAAEH,SAAS,EAAE,UAAb;MAAyBC,SAAS,EAAE,MAApC;MAA4CC,OAAO,EAAEN;KAHvD;IAIJQ,OAAO,EAAE;MAAEJ,SAAS,EAAE,CAAC,CAAd;MAAiBC,SAAS,EAAE,IAA5B;MAAkCC,OAAO,EAAEP;;;CAvBxD;AA2BA,AAAO,MAAMU,IAAiB,GAAG;EAC/BC,QAAQ,EAAE,CADqB;EAE/BC,GAAG,EAAE;IACHP,SAAS,EAAE,IADR;IAEHC,SAAS,EAAE,GAFR;IAGHC,OAAO,EAAE7B,IAAI,CAAC,IAAD,CAAJ,CAAWiB;GALS;EAO/BO,OAP+B;EAQ/BW,aAAa,EAAE,EARgB;EAS/BC,MAAM,EAAExC,OATuB;EAU/ByC,OAAO,EAAG9D,GAAD,IAAiBwC,MAAM,CAACC,IAAP,CAAYpB,OAAO,CAACrB,GAAG,CAACC,QAAJ,CAAa,KAAb,CAAD,CAAnB,EAA0C,KAA1C;CAVrB;;ACnCA,MAAMwD,MAAI,GAAG;EAAEG,aAAa,EAAE;CAA9B;AAEP,AAAO,MAAMG,OAAO,GAAG;EACrBL,QAAQ,EAAE,CADW;EAErBC,GAAG,EAAE,IAFgB;EAGrBV,OAAO,EAAE;UACD;MACJE,KAAK,EAAE;QACLa,MAAM,EAAE,UADH;QAELC,YAAY,EAAE;OAHZ;MAKJV,IAAI,EAAE;QACJS,MAAM,EAAE,UADJ;QAEJC,YAAY,EAAE;OAPZ;MASJT,OAAO,EAAE;KAVJ;UAYD;MACJL,KAAK,EAAE;QACLa,MAAM,EAAE,UADH;QAELC,YAAY,EAAE;OAHZ;MAKJV,IAAI,EAAE;QACJS,MAAM,EAAE,UADJ;QAEJC,YAAY,EAAE;OAPZ;MASJT,OAAO,EAAE;KArBJ;UAuBD;MACJL,KAAK,EAAE;QACLa,MAAM,EAAE,UADH;QAELC,YAAY,EAAE;OAHZ;MAKJV,IAAI,EAAE;QACJS,MAAM,EAAE,UADJ;QAEJC,YAAY,EAAE;OAPZ;MASJT,OAAO,EAAE;KAhCJ;UAkCD;MACJL,KAAK,EAAE;QACLa,MAAM,EAAE,UADH;QAELC,YAAY,EAAE;OAHZ;MAKJV,IAAI,EAAE;QACJS,MAAM,EAAE,UADJ;QAEJC,YAAY,EAAE;OAPZ;MASJT,OAAO,EAAE;;;CA9CR;;;;;;;;;;;;;ACOA,MAAMU,UAAU,GAAIC,IAAD,IAA4C;QAC9DC,UAAuB,GAAI,EAAjC;;OAEK,MAAMC,GAAX,IAAkBZ,IAAlB,EAAwB;UAChBa,OAAO,GAAGb,IAAI,CAACY,GAAD,CAApB;UACME,OAAO,GAAGJ,IAAI,CAACE,GAAD,CAApB;;QAEIG,KAAK,CAACC,OAAN,CAAcH,OAAd,CAAJ,EAA4B;MAC1BF,UAAU,CAACC,GAAD,CAAV,GAAkB,CAACE,OAAO,IAAI,EAAZ,EACfG,MADe,CACRJ,OADQ,EAEfK,MAFe,CAER,CAACC,CAAD,EAAIC,CAAJ,EAAOC,CAAP,KAAaA,CAAC,CAACC,OAAF,CAAUH,CAAV,MAAiBC,CAFtB,CAAlB;KADF,MAIO,IAAI,OAAOP,OAAP,KAAmB,QAAvB,EAAiC;MACtCF,UAAU,CAACC,GAAD,CAAV,qBAAuBC,OAAvB,EAAoCC,OAAO,IAAI,EAA/C;KADK,MAEA,IAAI,OAAOA,OAAP,KAAmB,WAAvB,EAAoC;MACzCH,UAAU,CAACC,GAAD,CAAV,GAAkBE,OAAlB;KADK,MAEAH,UAAU,CAACC,GAAD,CAAV,GAAkBC,OAAlB;;;SAGFF,UAAP;CAlBK;AAqBP,AAAO,MAAMY,cAAc,GAAIC,QAAD,IAA2B;QACjDC,QAAQ,GAAG;IAAEzB;GAAnB;;OACK,MAAM0B,OAAX,IAAsBF,QAAtB,EAAgC;UACxBG,KAAK,GAAGH,QAAQ,CAACE,OAAD,CAAtB;;SACK,MAAME,WAAX,IAA0BD,KAA1B,EAAiC;YACzBE,WAAW,GAAGF,KAAK,CAACC,WAAD,CAAzB;UACIE,IAAI,GAAGJ,OAAX;UACIE,WAAW,KAAK,MAApB,EAA4BE,IAAI,IAAIF,WAAW,CAACG,WAAZ,EAAR;MAC5BN,QAAQ,CAACK,IAAD,CAAR,GAAiBrB,UAAU,CAACoB,WAAD,CAA3B;;;;SAGGJ,QAAP;CAXK;AAcP,AAAO,MAAMA,QAAsB,GAAGF,cAAc,CAACS,QAAD,CAA7C;AAEP,AAGA;;;;;;;;;;;;;;AAaA,AAAO,MAAMC,YAAY,GAAG,CAACC,KAAD,EAAaR,OAAb,KAAiD;;MAEvE,CAACA,OAAL,EAAc;SACP,MAAMA,OAAX,IAAsBD,QAAtB,EAAgC;UAC1B;eACKQ,YAAY,CAACC,KAAD,EAAQR,OAAR,CAAnB;OADF,CAEE,OAAOS,CAAP,EAAU;;;UAER,IAAItG,KAAJ,CAAU,gBAAV,CAAN;;;QAGI;IAAE2D;MAAYiC,QAAQ,CAACC,OAAD,CAA5B;;OACK,MAAMU,OAAX,IAAsB5C,OAAtB,EAA+B;UACvB6C,MAAM,GAAG7C,OAAO,CAAC4C,OAAD,CAAtB;;SACK,MAAM/E,GAAX,IAAkBgF,MAAlB,EAA0B;YAClBC,OAAO,GAAGD,MAAM,CAAChF,GAAD,CAAtB,CADwB;;UAGpB0D,KAAK,CAACC,OAAN,CAAcsB,OAAd,CAAJ,EAA4B;eACnBA,OAAO,CAACC,IAAR,CACL,CAAC;UAAEhC,MAAF;UAAUC;SAAX,KACED,MAAM,KAAK2B,KAAX,IAAoB1B,YAAY,KAAK0B,KAFlC,CAAP;OAJsB;;;UAYtB,OAAOI,OAAP,KAAmB,QAAnB,KACCA,OAAO,CAAC/B,MAAR,KAAmB2B,KAAnB,IAA4BI,OAAO,CAAC9B,YAAR,KAAyB0B,KADtD,CADF,EAGE;eACOG,MAAP;OAfsB;;;UAmBpBC,OAAO,KAAKJ,KAAhB,EAAuB,OAAOG,MAAP;;;;QAGrB,IAAIxG,KAAJ,CAAW,gBAAeqG,KAAM,iBAAgBR,OAAQ,EAAxD,CAAN;CApCK;AAuCP,AAAO,MAAMc,UAAU,GAAG,CAACd,OAAD,EAAkBQ,KAAlB,KAA8C;QAChEG,MAAM,GAAGJ,YAAY,CAACC,KAAD,EAAQR,OAAR,CAA3B;;OACK,MAAMrE,GAAX,IAAkBgF,MAAlB,EAA0B;UAClBxC,OAAO,GAAGwC,MAAM,CAAChF,GAAD,CAAtB;;QAEI0D,KAAK,CAACC,OAAN,CAAcnB,OAAd,CAAJ,EAA4B;aACnBA,OAAO,CAAC0C,IAAR,CACL,CAAC;QAAEhC,MAAF;QAAUC;OAAX,KACED,MAAM,KAAK2B,KAAX,IAAoB1B,YAAY,KAAK0B,KAFlC,CAAP;;;QAMErC,OAAO,CAACU,MAAR,KAAmB2B,KAAnB,IAA4BrC,OAAO,CAACW,YAAR,KAAyB0B,KAAzD,EAAgE;aACvDrC,OAAO,CAACA,OAAf;;;;QAGE,IAAIhE,KAAJ,CAAW,gBAAeqG,KAAM,iBAAgBR,OAAQ,EAAxD,CAAN;CAhBK;;AClGA,MAAMe,cAAc,GAAG,CAC5BC,IAD4B,EAE5BC,IAA+B,GAAG,EAFN,KAGzB;QACG;IAAEC,SAAS,GAAG,CAAd;IAAiBC,OAAjB;IAA0BC,OAAO,GAAG,EAApC;IAAwCC;MAASJ,IAAvD;QACM;IAAEK,KAAK,GAAGrH,YAAV;IAAwBsH,MAAM,GAAG5G;MAAmBwG,OAAO,IAAI,EAArE;;QAEM3E,MAAM,GAAG,CAACkD,CAAD,EAAY8B,GAAG,GAAGpE,CAAC,IAAIA,CAAvB,KAA6B;QACtC,CAACsC,CAAC,EAAN,EAAU,OAAO8B,GAAP;;UACJC,MAAM,GAAIC,CAAD,IAAY;MACzBA,CAAC,CAAChC,CAAD,CAAD,GAAO4B,KAAK,CAACI,CAAC,CAAChC,CAAD,CAAF,CAAZ;aACO8B,GAAG,CAACE,CAAD,CAAV;KAFF;;WAIOlF,MAAM,CAACkD,CAAD,EAAI+B,MAAJ,CAAb;GANF;;QASME,YAAY,GAAGnF,MAAM,CAAC0E,SAAD,CAA3B;;MAEIU,YAAY,GAAIC,GAAD,IAAcN,MAAM,CAACM,GAAD,CAAvC;;MACI,CAACT,OAAL,EAAc;IACZQ,YAAY,GAAIC,GAAD,IAAcA,GAA7B;GADF,MAEO,IAAIT,OAAO,CAAChH,MAAZ,EAAoB;IACzBwH,YAAY,GAAIC,GAAD,IAAc;WACtB,MAAMC,KAAX,IAAoBV,OAApB,EAA6B;QAC3BS,GAAG,CAACC,KAAD,CAAH,GAAaP,MAAM,CAACM,GAAG,CAACC,KAAD,CAAJ,CAAnB;;;aAEKD,GAAP;KAJF;;;MAQEE,UAAU,GAAG,MAAOF,GAAP,IAAoB;IACnCA,GAAG,GAAG,MAAMA,GAAZ;WACOD,YAAY,CAACC,GAAD,CAAnB;GAFF;;MAIIR,IAAJ,EAAUU,UAAU,GAAIF,GAAD,IAAcD,YAAY,CAACC,GAAD,CAAvC;SAEH,CAAC,GAAGG,MAAJ,KAAyB;UACxBC,MAAM,GAAGjB,IAAI,CAAC,GAAGW,YAAY,CAACK,MAAD,CAAhB,CAAnB;WACOD,UAAU,CAACE,MAAD,CAAjB;GAFF;CApCK;;ACCA,MAAMC,SAAgC,GAAI7I,MAAM,CAAC,MACtD4B,OAAO,CAAC,WAAD,CAD8C,CAAhD;AAIP,MAAMkG,OAAO,GAAG;EACdG,KAAK,EAAElE,CAAC,IAAIC,MAAM,CAACC,IAAP,CAAYF,CAAZ,EAAe,KAAf,CADE;EAEdmE,MAAM,EAAEnE,CAAC,IAAIA,CAAC,CAACtC,QAAF,CAAW,KAAX;CAFf;AAKA,AAAO,MAAMqH,eAAe,GAAGpB,cAAc,CAACmB,SAAS,CAACC,eAAX,EAA4B;EACvEhB;CAD2C,CAAtC;AAGP,AAAO,MAAMiB,kBAAkB,GAAGrB,cAAc,CAACmB,SAAS,CAACE,kBAAX,EAA+B;EAC7EjB;CAD8C,CAAzC;AAGP,AAAO,MAAMkB,eAAe,GAAGtB,cAAc,CAACmB,SAAS,CAACG,eAAX,EAA4B;EACvElB;CAD2C,CAAtC;AAGP,AAAO,MAAMmB,kBAAkB,GAAGvB,cAAc,CAACmB,SAAS,CAACI,kBAAX,EAA+B;EAC7EnB,OAD6E;EAE7ED,SAAS,EAAE;CAFmC,CAAzC;AAIP,AAAO,MAAMqB,iBAAiB,GAAGxB,cAAc,CAACmB,SAAS,CAACK,iBAAX,EAA8B;EAC3EpB,OAD2E;EAE3ED,SAAS,EAAE;CAFkC,CAAxC;AAIP,AAAO,MAAMsB,MAAM,GAAGzB,cAAc,CAACmB,SAAS,CAACM,MAAX,EAAmB;EACrDrB,OADqD;EAErDD,SAAS,EAAE,CAF0C;EAGrDE,OAAO,EAAE;CAHyB,CAA7B;AAKP,AAAO,MAAMqB,SAAS,GAAG1B,cAAc,CAACmB,SAAS,CAACQ,IAAX,EAAiB;EACtDvB,OADsD;EAEtDD,SAAS,EAAE,CAF2C;EAGtDE,OAAO,EAAE,CAAC,WAAD;CAH4B,CAAhC;;AC5BA,MAAMuB,OAAO,GAAG,CACrBnE,GADqB,EAErBwB,OAAe,GAAG,MAFG,KAGyB;QACxC;IAAE/B,SAAF;IAAaE;MAAY4B,QAAQ,CAACC,OAAD,CAAR,CAAkBxB,GAAjD;QACMoE,MAAM,GAAGzE,OAAO,CAACtB,MAAR,CAAe2B,GAAf,CAAf;;MACI/D,QAAQ,CAACmI,MAAM,CAAChG,KAAP,CAAa,CAAb,EAAgB,CAAhB,CAAD,EAAqB,EAArB,CAAR,KAAqCqB,SAAzC,EAAoD;UAC5C,IAAI9D,KAAJ,CACH,sBAAqByI,MAAM,CAAChG,KAAP,CAAa,CAAb,EAAgB,CAAhB,CAAmB,gBAAeoD,OAAQ,EAD5D,CAAN;;;QAII6C,UAAU,GAAGD,MAAM,CAAChG,KAAP,CAAa,CAAb,EAAgB,EAAhB,CAAnB;MACIkG,QAAQ,GAAG,KAAf;;MACIF,MAAM,CAACxI,MAAP,IAAiB,EAArB,EAAyB;QACnBK,QAAQ,CAACmI,MAAM,CAAChG,KAAP,CAAa,EAAb,EAAiB,EAAjB,CAAD,EAAuB,EAAvB,CAAR,KAAuC,CAA3C,EAA8C;YACtC,IAAIzC,KAAJ,CAAW,4BAA2ByI,MAAM,CAAChG,KAAP,CAAa,EAAb,EAAiB,EAAjB,CAAqB,EAA3D,CAAN;;;IAEFkG,QAAQ,GAAG,IAAX;;;SAEK;IAAED,UAAF;IAAcC;GAArB;CAnBK;AAsBP,AAAO,MAAMC,KAAK,GAAG,CACnBF,UADmB,EAEnB7C,OAAe,GAAG,MAFC,EAGnB8C,QAAiB,GAAG,IAHD,KAIR;MACPD,UAAU,CAACzI,MAAX,KAAsB,EAA1B,EAA8B,MAAM,IAAID,KAAJ,CAAW,kBAAX,CAAN;QACxB;IAAE8D,SAAF;IAAaE;MAAY4B,QAAQ,CAACC,OAAD,CAAR,CAAkBxB,GAAjD;QACMK,MAAM,GAAGZ,SAAS,CAACnD,QAAV,CAAmB,EAAnB,CAAf;QACMkI,YAAY,GAAGF,QAAQ,GAAG,IAAH,GAAU,EAAvC;QACMG,MAAM,GAAI,GAAEpE,MAAO,GAAEgE,UAAW,GAAEG,YAAa,EAArD;SACO7E,OAAO,CAAC3B,MAAR,CAAeyG,MAAf,CAAP;CAVK;AAaP,AAGO,MAAMC,QAAQ,GAAG,OACtBL,UADsB,EAEtBC,QAAiB,GAAG,IAFE,KAGFX,eAAe,CAACU,UAAD,EAAaC,QAAb,CAH9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtCP,MAAM9C,OAAO,GAAG,MAAhB;AAEAmD,cAAQ,CAAC,gBAAD,EAAmB,YAAY;EACrCC,IAAI,CAACC,OAAL,CAAarJ,IAAI,IAAI;IACnBsJ,QAAE,CAAE,iCAAgCtJ,IAAI,CAAC,CAAD,CAAI,EAA1C,EAA6C,YAAY;YACnDwE,GAAG,GAAGxE,IAAI,CAAC,CAAD,CAAhB;YACM;QAAE6I,UAAF;QAAcC;UAAaH,OAAO,CAACnE,GAAD,EAAMwB,OAAN,CAAxC;MACAuD,WAAM,CAACC,KAAP,CAAaV,QAAb,EAAuB9I,IAAI,CAAC,CAAD,CAA3B;MACAuJ,WAAM,CAACC,KAAP,CAAaX,UAAb,EAAyB7I,IAAI,CAAC,CAAD,CAA7B;KAJA,CAAF;IAOAsJ,QAAE,CAAE,wCAAuCtJ,IAAI,CAAC,CAAD,CAAI,EAAjD,EAAoD,kBAAkB;YAChE8I,QAAQ,GAAG9I,IAAI,CAAC,CAAD,CAArB;YACM6I,UAAU,GAAG7I,IAAI,CAAC,CAAD,CAAvB;YACMyJ,SAAS,GAAG,MAAMP,QAAQ,CAACL,UAAD,EAAaC,QAAb,CAAhC;MACAS,WAAM,CAACC,KAAP,CAAaC,SAAb,EAAwBzJ,IAAI,CAAC,CAAD,CAA5B;KAJA,CAAF;IAOAsJ,QAAE,CAAE,sCAAqCtJ,IAAI,CAAC,CAAD,CAAI,EAA/C,EAAkD,YAAY;YACxD8I,QAAQ,GAAG9I,IAAI,CAAC,CAAD,CAArB;YACM6I,UAAU,GAAG7I,IAAI,CAAC,CAAD,CAAvB;YACMwE,GAAG,GAAGuE,KAAK,CAACF,UAAD,EAAa7C,OAAb,EAAsB8C,QAAtB,CAAjB;MACAS,WAAM,CAACC,KAAP,CAAahF,GAAb,EAAkBxE,IAAI,CAAC,CAAD,CAAtB;KAJA,CAAF;GAfF;CADM,CAAR;;ACNO,MAAM0J,QAAQ,GAAG,UAAjB;AACP,AAAO,MAAMC,IAAI,GAAG,0BAAb;AACP,AAAO,MAAMC,SAAS,GAAG,UAAlB;AACP,AAAO,MAAMC,SAAS,GAAG,IAAlB;AACP,AAAO,MAAMC,wBAAwB,GAAG,oBAAjC;AACP,AAAO,MAAMC,aAAa,GAAG;EAC3BC,WAAW,EAAE,CADc;EAE3BC,iBAAiB,EAAE,CAFQ;EAG3BC,KAAK,EAAE;CAHF;AAMP,AAAO,MAAMC,SAAS,GAAI/I,IAAD,IACvBA,IAAI,CAACgJ,OAAL,CAAatJ,QAAb,CAAsB,EAAtB,EAA0BC,QAA1B,CAAmC,CAAnC,EAAsC,GAAtC,IACAK,IAAI,CAAC8I,KAAL,CAAWpJ,QAAX,CAAoB,EAApB,EAAwBC,QAAxB,CAAiC,CAAjC,EAAoC,GAApC,CADA,GAEAK,IAAI,CAAC6I,iBAAL,CAAuBnJ,QAAvB,CAAgC,EAAhC,EAAoCC,QAApC,CAA6C,CAA7C,EAAgD,GAAhD,CAFA,GAGAK,IAAI,CAAC4I,WAAL,CAAiBlJ,QAAjB,CAA0B,EAA1B,EAA8BC,QAA9B,CAAuC,CAAvC,EAA0C,GAA1C,CAHA,GAIAK,IAAI,CAACiJ,SALA;AAOP,AAAO,MAAMC,WAAW,GAAG,CAAC1B,MAAD,EAAiB5C,OAAjB,KAAoD;;MAEzE4C,MAAM,CAACxI,MAAP,KAAkB,GAAtB,EAA2B,MAAM,IAAID,KAAJ,CAAU,kBAAV,CAAN,CAFkD;;QAKvEiK,OAAO,GAAG3J,QAAQ,CAACmI,MAAM,CAAChG,KAAP,CAAa,CAAb,EAAgB,CAAhB,CAAD,EAAqB,EAArB,CAAxB;;MACIoD,OAAJ,EAAa;UACLY,OAAO,GAAGL,YAAY,CAAC6D,OAAD,EAAUpE,OAAV,CAA5B;QACI,CAACY,OAAL,EAAc,MAAM,IAAIzG,KAAJ,CAAU,wCAAV,CAAN;;;SAET;IACLiK,OADK;IAELF,KAAK,EAAEzJ,QAAQ,CAACmI,MAAM,CAAChG,KAAP,CAAa,CAAb,EAAgB,EAAhB,CAAD,EAAsB,EAAtB,CAFV;IAGLqH,iBAAiB,EAAExJ,QAAQ,CAACmI,MAAM,CAAChG,KAAP,CAAa,EAAb,EAAiB,EAAjB,CAAD,EAAuB,EAAvB,CAHtB;IAILoH,WAAW,EAAEvJ,QAAQ,CAACmI,MAAM,CAAChG,KAAP,CAAa,EAAb,EAAiB,EAAjB,CAAD,EAAuB,EAAvB,CAJhB;IAKLyH,SAAS,EAAEzB,MAAM,CAAChG,KAAP,CAAa,EAAb,EAAiB,EAAjB;GALb;CAVK;;ACrBA,MAAM2H,SAAS,GAAI1J,GAAD,IAAiB,cAAcb,IAAd,CAAmBa,GAAnB,CAAnC;;ACcA,MAAM2J,QAAQ,GAAIC,KAAD,IAA2B;;QAE3CC,QAAQ,GAAGD,KAAK,CAACA,KAAK,CAACrK,MAAN,GAAe,CAAhB,CAAL,KAA4B,IAA7C,CAFiD;;MAI7CsK,QAAJ,EAAcD,KAAK,GAAGA,KAAK,CAAC7H,KAAN,CAAY,CAAZ,EAAe,CAAC,CAAhB,CAAR,CAJmC;;MAM7C,CAAC2H,SAAS,CAACE,KAAD,CAAd,EAAuB,MAAM,IAAItK,KAAJ,CAAW,2BAA0BsK,KAAM,EAA3C,CAAN;MACnBE,WAAW,GAAGlK,QAAQ,CAACgK,KAAD,CAA1B,CAPiD;;MAS7CC,QAAJ,EAAcC,WAAW,IAAIjB,QAAf;MAEViB,WAAW,GAAGf,SAAlB,EAA6B,MAAM,IAAIzJ,KAAJ,CAAW,uBAAsBwK,WAAY,EAA7C,CAAN;SACtBA,WAAP;CAZK;AAeP,AASO,MAAMC,YAAU,GAAG,CAACC,IAAD,EAAeC,IAAY,GAAG,GAA9B,KAA8C;MAClE;UACIC,OAAO,GAAGF,IAAI,CAACG,KAAL,CAAW,GAAX,CAAhB;UACMC,QAAQ,GAAGF,OAAO,CAACG,KAAR,EAAjB;QACID,QAAQ,KAAKH,IAAjB,EAAuB,MAAM,IAAI3K,KAAJ,CAAW,uBAAsB8K,QAAS,iBAAgBH,IAAK,GAA/D,CAAN;WAChBC,OAAO,CAACxK,GAAR,CAAYiK,QAAZ,CAAP;GAJF,CAKE,OAAO/D,CAAP,EAAU;IACVA,CAAC,CAAC0E,OAAF,GAAa,aAAYN,IAAK,OAAMpE,CAAC,CAAC0E,OAAQ,EAA9C;UACM1E,CAAN;;CARG;;AC7BA,MAAM2E,SAA2C,GAAG,CAACzJ,GAAD,EAAMqE,OAAN,KAAkB;QACrE;IAAE6C,UAAF;IAAcwB;MAAc1I,GAAlC;MACI,CAACkH,UAAL,EAAiB,MAAM,IAAI1I,KAAJ,CAAU,qBAAV,CAAN;MACb,CAACkK,SAAL,EAAgB,OAAOgB,QAAQ,CAACxC,UAAD,CAAf;;QACVyC,OAAO,qBAAQvB,aAAR,EAA0BpI,GAA1B,CAAb;;MACI,OAAO2J,OAAO,CAAClB,OAAf,KAA2B,QAA/B,EAAyC;UACjC;MAAEpG,KAAK,EAAE;QAAEC;;QAAgBsC,YAAY,CAAC,MAAD,EAASP,OAAT,CAA7C;IACAsF,OAAO,CAAClB,OAAR,GAAkBnG,SAAlB;;;SAEKqH,OAAP;CATK;AAYP,AAAO,MAAMD,QAA0C,GAAG,CAACE,IAAD,EAAOvF,OAAP,EAAgBoE,OAAO,GAAG,MAA1B,KAAqC;QACvFjJ,IAAI,GAAGa,UAAU,CAAC2H,IAAD,EAAO4B,IAAP,CAAvB;QACM;IAAEvH,KAAK,EAAE;MAAEC;;MAAgBsC,YAAY,CAAC6D,OAAD,EAAUpE,OAAV,CAA7C;MACI,OAAO/B,SAAP,KAAqB,QAAzB,EAAmC,MAAM,IAAI9D,KAAJ,CAAU,EAAV,CAAN;SAC5BiL,SAAS,CAAC;IACfvC,UAAU,EAAE1H,IAAI,CAACyB,KAAL,CAAW,CAAX,EAAc,EAAd,CADG;IAEfyH,SAAS,EAAElJ,IAAI,CAACyB,KAAL,CAAW,EAAX,EAAe,GAAf,CAFI;IAGfwH,OAAO,EAAEnG;GAHK,EAIb+B,OAJa,CAAhB;CAJK;AAWP,AAAO,MAAMwF,SAAwC,GAAG,CAAC5C,MAAD,EAAS5C,OAAT,KAAqB;;QAErEyF,UAAU,GAAGhL,QAAQ,CAACmI,MAAM,CAAChG,KAAP,CAAa,EAAb,EAAiB,EAAjB,CAAD,EAAuB,EAAvB,CAA3B;MACI6I,UAAU,KAAK,CAAnB,EAAsB,MAAM,IAAItL,KAAJ,CAAU,0BAAV,CAAN;;IAGpB0I,UAAU,EAAED,MAAM,CAAChG,KAAP,CAAa,EAAb,EAAiB,GAAjB;KACT0H,WAAW,CAAC1B,MAAD,EAAS5C,OAAT,CAFhB;CALK;AAWP,AAAO,MAAM4E,YAA8C,GAAG,CAACc,IAAD,EAAO1F,OAAO,GAAG,MAAjB,KAA4B;QAClF4C,MAAM,GAAG9B,UAAU,CAACd,OAAD,EAAU0F,IAAI,CAAC9I,KAAL,CAAW,CAAX,EAAc,CAAd,CAAV,CAAV,CAAsCC,MAAtC,CAA6C6I,IAA7C,CAAf;SACOF,SAAO,CAAC5C,MAAD,EAAS5C,OAAT,CAAd;CAFK;AAKP,AAAO,MAAM2F,OAAwC,GAAG,OAAOhK,GAAP,EAAY8I,KAAZ,EAAmBmB,SAAS,GAAG,KAA/B,KAAyC;MAC3F;UACI;MAAE1B,KAAF;MAASE,OAAT;MAAkBvB,UAAlB;MAA8BwB;QAAc1I,GAAlD;QACI8I,KAAK,GAAGb,SAAZ,EAAuB,MAAM,IAAIzJ,KAAJ,CAAU,qBAAV,CAAN;QACnB+J,KAAK,IAAIL,SAAb,EAAwB,MAAM,IAAI1J,KAAJ,CAAU,iBAAV,CAAN;UAClBsJ,SAAS,GAAG9H,GAAG,CAAC8H,SAAJ,KAAiB,MAAMoC,QAAW,CAAChD,UAAD,EAAa,IAAb,CAAlC,CAAlB,CAJE;;QAMEiD,QAAQ,GAAGrB,KAAK,GAAGf,QAAR,IAAoBkC,SAApB,GAAgCnC,SAAhC,GAA6C,KAAIZ,UAAW,EAA3E;IACAiD,QAAQ,IAAIrB,KAAK,CAAC3J,QAAN,CAAe,EAAf,EAAmBC,QAAnB,CAA4B,CAA5B,EAA+B,GAA/B,CAAZ;UACMI,IAAI,GAAGa,UAAU,CAACqI,SAAD,EAAYyB,QAAZ,CAAvB;UAEMC,QAAQ,GAAG,MAAMzD,kBAAkB,CAACO,UAAD,EAAa1H,IAAI,CAACyB,KAAL,CAAW,CAAX,EAAc,EAAd,CAAb,CAAzC;UACMqH,iBAAiB,GAAGR,SAAS,GAAGtH,OAAO,CAACsH,SAAD,CAAP,CAAmB7G,KAAnB,CAAyB,CAAzB,EAA4B,CAA5B,CAAH,GAAoC,CAAvE;WAEO;MACLiG,UAAU,EAAEkD,QADP;MAEL/B,WAAW,EAAES,KAFR;MAGLJ,SAAS,EAAElJ,IAAI,CAACyB,KAAL,CAAW,EAAX,EAAe,GAAf,CAHN;MAILsH,KAAK,EAAEA,KAAK,GAAG,CAJV;MAKLD,iBAAiB,EAAExJ,QAAQ,CAACwJ,iBAAD,EAAoB,EAApB,CALtB;MAMLG;KANF;GAbF,CAqBE,OAAO3D,CAAP,EAAU;QACN,CAACA,CAAC,CAAC0E,OAAF,CAAUa,QAAV,CAAmBlC,wBAAnB,CAAL,EAAmD,MAAMrD,CAAN;WAC5CkF,OAAO,CAAChK,GAAD,EAAM8I,KAAK,GAAG,CAAd,CAAd;;CAxBG;AA4BP,AAAO,MAAMwB,MAAsC,GAAG,OAAOtK,GAAP,EAAYkJ,IAAZ,KAAqB;MACrE,OAAOA,IAAP,KAAgB,QAApB,EAA8BA,IAAI,GAAGqB,YAAA,CAAgBrB,IAAhB,CAAP;;OACzB,MAAMJ,KAAX,IAAoBI,IAApB,EAA0B;IACxBlJ,GAAG,GAAG,MAAMgK,OAAO,CAAChK,GAAD,EAAM8I,KAAN,CAAnB;;;SAEK9I,GAAP;CALK;AAQP,AAAO,MAAMwK,KAAoC,GAAGxK,GAAG,IAAI;QACnD;IAAEkH,UAAF;IAAcY;MAAuB9H,GAA3C;QAAkCyK,IAAlC,4BAA2CzK,GAA3C;;MACIkH,UAAU,CAACzI,MAAX,KAAsB,EAA1B,EAA8B,MAAM,IAAID,KAAJ,CAAU,0BAAV,CAAN;SACvBgK,SAAS,CAACiC,IAAD,CAAT,GAAmB,KAAIvD,UAAW,EAAzC;CAHK;AAMP,AAAO,MAAM/H,UAA0C,GAAG,CAACuL,KAAD,EAAQrG,OAAO,GAAG,MAAlB,KACxDc,UAAU,CAACd,OAAD,EAAUqG,KAAK,CAACjC,OAAhB,CAAV,CAAmC5H,MAAnC,CAA0C2J,KAAK,CAACE,KAAD,CAA/C,CADK;AAGP,AAAO,MAAMC,MAAsC,GAAG,OAAOD,KAAP,EAAcrG,OAAd,KAA0B;QACxE;IAAE6C,UAAF;IAAcuB;MAAqBiC,KAAzC;QAAgCD,IAAhC,4BAAyCC,KAAzC;;QACM;IAAEjI,IAAI,EAAE;MAAEH;;MAAgBsC,YAAY,CAAC8F,KAAK,CAACjC,OAAP,EAAgBpE,OAAhB,CAA5C;QACMyD,SAAS,GAAG4C,KAAK,CAAC5C,SAAN,KAAmB,MAAMoC,QAAW,CAAChD,UAAD,EAAa,IAAb,CAApC,CAAlB;;IACSY,SAAT;IAAoBW,OAAO,EAAEnG;KAAcmI,IAA3C;CAJK;;;;;;;;;;;;;;ACrFA,MAAMG,QAAyC,GAAG,CAAC5K,GAAD,EAAMqE,OAAN,KAAkB;QACnE;IAAEyD,SAAF;IAAaY;MAAuB1I,GAA1C;QAAiCyK,IAAjC,4BAA0CzK,GAA1C;;MACI,CAAC8H,SAAL,EAAgB,MAAM,IAAItJ,KAAJ,CAAU,oBAAV,CAAN;MACZ,CAACkK,SAAL,EAAgB,MAAM,IAAIlK,KAAJ,CAAU,mBAAV,CAAN;;QACVuL,IAAI,qBAAQ3B,aAAR;IAAuBN,SAAvB;IAAkCY;KAAc+B,IAAhD,CAAV;;MACI,CAACV,IAAI,CAACtB,OAAV,EAAmB;UACX;MAAEhG,IAAI,EAAE;QAAEH;;QAAgBsC,YAAY,CAAC,MAAD,EAASP,OAAT,CAA5C;IACA0F,IAAI,CAACtB,OAAL,GAAenG,SAAf;;;SAEKyH,IAAP;CATK;AAYP,AAAO,MAAMF,SAAuC,GAAG,CAAC5C,MAAD,EAAS5C,OAAT,KAAqB;;QAEpEyF,UAAU,GAAGhL,QAAQ,CAACmI,MAAM,CAAChG,KAAP,CAAa,EAAb,EAAiB,EAAjB,CAAD,EAAuB,EAAvB,CAA3B;MACI6I,UAAU,KAAK,CAAf,IAAoBA,UAAU,KAAK,CAAvC,EAA0C,MAAM,IAAItL,KAAJ,CAAU,yBAAV,CAAN;;IAGxCsJ,SAAS,EAAEb,MAAM,CAAChG,KAAP,CAAa,EAAb,EAAiB,GAAjB;KACR0H,WAAW,CAAC1B,MAAD,EAAS5C,OAAT,CAFhB;CALK;AAWP,AAAO,MAAM4E,YAA6C,GAAG,CAACyB,KAAD,EAAQrG,OAAO,GAAG,MAAlB,KAA6B;QAClF4C,MAAM,GAAG9B,UAAU,CAACd,OAAD,EAAUqG,KAAK,CAACzJ,KAAN,CAAY,CAAZ,EAAe,CAAf,CAAV,CAAV,CAAuCC,MAAvC,CAA8CwJ,KAA9C,CAAf;SACOb,SAAO,CAAC5C,MAAD,EAAS5C,OAAT,CAAd;CAFK;AAKP,AAAO,MAAM2F,SAAuC,GAAG,OAAOhK,GAAP,EAAY8I,KAAZ,KAAsB;MACvE;UACI;MAAEP,KAAF;MAASE,OAAT;MAAkBX,SAAlB;MAA6BY;QAAc1I,GAAjD;QACI8I,KAAK,IAAIf,QAAb,EAAuB,MAAM,IAAIvJ,KAAJ,CAAU,gDAAV,CAAN;QACnBsK,KAAK,GAAGb,SAAZ,EAAuB,MAAM,IAAIzJ,KAAJ,CAAU,qBAAV,CAAN;QACnB+J,KAAK,IAAIL,SAAb,EAAwB,MAAM,IAAI1J,KAAJ,CAAU,iBAAV,CAAN;UAElB2L,QAAQ,GAAGrC,SAAS,GAAGgB,KAAK,CAAC3J,QAAN,CAAe,EAAf,EAAmBC,QAAnB,CAA4B,CAA5B,EAA+B,GAA/B,CAA7B;UACMI,IAAI,GAAGa,UAAU,CAACqI,SAAD,EAAYyB,QAAZ,CAAvB;UACMC,QAAQ,GAAG,MAAMxD,iBAAiB,CAACkB,SAAD,EAAYtI,IAAI,CAACyB,KAAL,CAAW,CAAX,EAAc,EAAd,CAAZ,CAAxC;UACMqH,iBAAiB,GAAG9H,OAAO,CAACsH,SAAD,CAAP,CAAmB7G,KAAnB,CAAyB,CAAzB,EAA4B,CAA5B,CAA1B;WAEO;MACL6G,SAAS,EAAEsC,QADN;MAEL/B,WAAW,EAAES,KAFR;MAGLJ,SAAS,EAAElJ,IAAI,CAACyB,KAAL,CAAW,EAAX,EAAe,GAAf,CAHN;MAILsH,KAAK,EAAEA,KAAK,GAAG,CAJV;MAKLD,iBAAiB,EAAExJ,QAAQ,CAACwJ,iBAAD,EAAoB,EAApB,CALtB;MAMLG;KANF;GAXF,CAmBE,OAAO3D,CAAP,EAAU;QACN,CAACA,CAAC,CAAC0E,OAAF,CAAUa,QAAV,CAAmBlC,wBAAnB,CAAL,EAAmD,MAAMrD,CAAN;WAC5CkF,SAAO,CAAChK,GAAD,EAAM8I,KAAK,GAAG,CAAd,CAAd;;CAtBG;AA0BP,AAAO,MAAMwB,QAAqC,GAAG,OAAOtK,GAAP,EAAYkJ,IAAZ,KAAqB;MACpE,OAAOA,IAAP,KAAgB,QAApB,EAA8BA,IAAI,GAAGqB,YAAA,CAAgBrB,IAAhB,EAAsB,GAAtB,CAAP;;OACzB,MAAMJ,KAAX,IAAoBI,IAApB,EAA0B;IACxBlJ,GAAG,GAAG,MAAMgK,SAAO,CAAChK,GAAD,EAAM8I,KAAN,CAAnB;;;SAEK9I,GAAP;CALK;AAQP,AAAO,MAAMwK,OAAmC,GAAG;MAAC;IAAE1C;GAAH;MAAiB2C,IAAjB;;SACjDjC,SAAS,CAACiC,IAAD,CAAT,GAAkB3C,SAD+B;CAA5C;AAGP,AAAO,MAAM3I,UAAyC,GAAG,CAACa,GAAD,EAAMqE,OAAO,GAAG,MAAhB,KACvDc,UAAU,CAACd,OAAD,EAAUrE,GAAG,CAACyI,OAAd,CAAV,CAAiC5H,MAAjC,CAAwC2J,OAAK,CAACxK,GAAD,CAA7C,CADK;;;;;;;;;;;;AC5DA,MAAMiJ,YAAuC,GAAG,CAACc,IAAD,EAAO1F,OAAO,GAAG,MAAjB,KAA4B;QAC3E9B,SAAS,GAAGwH,IAAI,CAAC9I,KAAL,CAAW,CAAX,EAAc,CAAd,CAAlB;QACM4J,SAAS,GAAGjG,YAAY,CAACrC,SAAD,EAAY8B,OAAZ,CAA9B;;MACI9B,SAAS,KAAKsI,SAAS,CAACxI,KAAV,CAAgBE,SAAlC,EAA6C;WACpCuI,YAAA,CAAiBf,IAAjB,EAAuB1F,OAAvB,CAAP;;;SAEK0G,YAAA,CAAgBhB,IAAhB,EAAsB1F,OAAtB,CAAP;CANK;AASP,AAAO,MAAMqF,UAAmC,GAAG,CAAC,GAAGjI,CAAJ,KAAUqJ,QAAA,CAAe,GAAGrJ,CAAlB,CAAtD;;AAEP,MAAMuJ,WAAW,GAAG,CAACC,QAAD,EAAmBC,OAAe,GAAGD,QAArC,KAClB,CAACjL,GAAD,EAAmB,GAAGqG,MAAtB,KAAsC;QAC9B;IAAEa,UAAU,GAAG,IAAf;IAAqBY,SAAS,GAAG;MAAkB9H,GAAzD;QAAgDyK,IAAhD,4BAAyDzK,GAAzD;;MACIkH,UAAJ,EAAgB;WACP4D,KAAK,CAACG,QAAD,CAAL;MAAkB/D;OAAeuD,IAAjC,GAAyC,GAAGpE,MAA5C,CAAP;GADF,MAEO,IAAIyB,SAAJ,EAAe,OAAOiD,IAAI,CAACG,OAAD,CAAJ;IAAgBpD;KAAc2C,IAA9B,GAAsC,GAAGpE,MAAzC,CAAP;;QAChB,IAAI7H,KAAJ,CAAU,oBAAV,CAAN;CANJ;;;AAUA,AAAO,MAAM2M,QAAmC,GAAGH,WAAW,CAAC,WAAD,EAAc,UAAd,CAAvD;AACP,AAAO,MAAMhB,SAAiC,GAAGgB,WAAW,CAAC,SAAD,CAArD;AACP,AAAO,MAAMV,QAA+B,GAAGU,WAAW,CAAC,QAAD,CAAnD;AACP,AAAO,MAAM7L,UAAmC,GAAG6L,WAAW,CAAC,UAAD,CAAvD;AACP,AAAO,MAAML,QAA+B,GAAGK,WAAW,CAAC,QAAD,EAAW,UAAX,CAAnD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7BP,IAAI;WAAE3G;IAAY+G,QAAlB;AAEA5D,cAAQ,CAAC,0BAAD,EAA6B,YAAY;EAC/C4D,QAAc,CAAC1B,QAAf,CAAwBhC,OAAxB,CAAgCrJ,IAAI,IAAI;IACtCsJ,QAAE,CAAE,0BAAyBtJ,IAAI,CAAC,CAAD,CAAI,EAAnC,EAAsC,YAAY;YAC5C+L,QAAQ,GAAGiB,UAAA,CAAchN,IAAI,CAAC,CAAD,CAAlB,EAAuBgG,SAAvB,CAAjB;YACMiH,IAAI,GAAGD,UAAA,CAAcjB,QAAd,CAAb;MACAxC,WAAM,CAAC2D,SAAP,CAAiBD,IAAjB,EAAuBjN,IAAI,CAAC,CAAD,CAA3B;KAHA,CAAF;GADF;EAQA+M,QAAc,CAACI,MAAf,CAAsB9D,OAAtB,CAA8BrJ,IAAI,IAAI;UAC9BoN,SAAS,GAAGpN,IAAI,CAAC,CAAD,CAAtB;UACM6I,UAAU,GAAG;MACjBA,UAAU,EAAE7I,IAAI,CAAC,CAAD,CADC;MAEjBoK,OAAO,EAAEpK,IAAI,CAAC,CAAD,CAFI;MAGjBkK,KAAK,EAAElK,IAAI,CAAC,CAAD,CAHM;MAIjBiK,iBAAiB,EAAEjK,IAAI,CAAC,CAAD,CAJN;MAKjBgK,WAAW,EAAEhK,IAAI,CAAC,CAAD,CALA;MAMjBqK,SAAS,EAAErK,IAAI,CAAC,CAAD;KANjB;IASAsJ,QAAE,CAAE,yBAAwBtJ,IAAI,CAAC,CAAD,CAAI,EAAlC,EAAqC,YAAY;YAC3CqN,YAAY,GAAGL,YAAA,CAAgBI,SAAhB,EAA2BpH,SAA3B,CAArB;MACAuD,WAAM,CAAC2D,SAAP,CAAiBG,YAAjB,EAA+BxE,UAA/B;KAFA,CAAF;IAKAS,QAAE,CAAE,uBAAsBtJ,IAAI,CAAC,CAAD,CAAI,EAAhC,EAAmC,YAAY;YACzCsN,iBAAiB,GAAGN,UAAA,CAAcnE,UAAd,EAA0B7C,SAA1B,CAA1B;MACAuD,WAAM,CAACC,KAAP,CAAa8D,iBAAb,EAAgCF,SAAhC;KAFA,CAAF;GAhBF;EAsBAL,QAAc,CAACpB,OAAf,CAAuBtC,OAAvB,CAA+BrJ,IAAI,IAAI;IACrCsJ,QAAE,CAAE,gBAAetJ,IAAI,CAAC,CAAD,CAAI,cAAaA,IAAI,CAAC,CAAD,CAAI,EAA9C,EAAiD,kBAAkB;YAC7D6I,UAAU,GAAG7I,IAAI,CAAC,CAAD,CAAvB;YACMqK,SAAS,GAAGrK,IAAI,CAAC,CAAD,CAAtB;YACMyK,KAAK,GAAGzK,IAAI,CAAC,CAAD,CAAlB;YACMyJ,SAAS,GAAGzJ,IAAI,CAAC,CAAD,CAAtB;YACMuN,gBAAgB,GAAG;QACvB1E,UAAU,EAAE7I,IAAI,CAAC,CAAD,CADO;QAEvBqK,SAAS,EAAErK,IAAI,CAAC,CAAD,CAFQ;QAGvBgK,WAAW,EAAEhK,IAAI,CAAC,CAAD,CAHM;;OAAzB;YAMM0L,IAAI,GAAGsB,QAAA,CAAc;QAAEnE,UAAF;QAAcwB,SAAd;QAAyBZ;OAAvC,EAAoDzD,SAApD,CAAb,CAXmE;;YAa7D+F,QAAQ,GAAG,MAAMiB,SAAA,CAAatB,IAAb,EAAmBjB,KAAnB,CAAvB;MACAlB,WAAM,CAAC2D,SAAP,CAAiB;QACfrE,UAAU,EAAEkD,QAAQ,CAAClD,UADN;QAEfwB,SAAS,EAAE0B,QAAQ,CAAC1B,SAFL;QAGfL,WAAW,EAAE+B,QAAQ,CAAC/B;OAHxB,EAIGuD,gBAJH;KAdA,CAAF;GADF;EAuBAR,QAAc,CAACS,OAAf,CAAuBnE,OAAvB,CAA+BrJ,IAAI,IAAI;IACrCsJ,QAAE,CAAE,qBAAoBtJ,IAAI,CAAC,CAAD,CAAI,uBAC9BA,IAAI,CAAC,CAAD,CACL,EAFC,EAEE,kBAAkB;YACdiN,IAAI,GAAGjN,IAAI,CAAC,CAAD,CAAjB;YACMyN,SAAS,GAAGT,YAAA,CAAgBC,IAAhB,EAAsBjH,SAAtB,CAAlB;UAEI0H,OAAO,GAAG,CAAd;UACInJ,QAAQ,GAAG,CAAf;UACIoJ,IAAI,GAAG3N,IAAI,CAAC,CAAD,CAAf;UACI,CAAC2N,IAAL,EAAWA,IAAI,GAAG,CAAC,EAAD,CAAP;;UACP3N,IAAI,CAAC,CAAD,CAAR,EAAa;QACX0N,OAAO,GAAG1N,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAV;QACAuE,QAAQ,GAAGvE,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAX;;;UAEE4N,SAAS,GAAG,CAAhB;;YAEMC,QAAQ,GAAG,MAAOhD,IAAP,IAAgB;cACzBwB,KAAK,GAAG,MAAMW,QAAA,CAAYS,SAAZ,EAAuB5C,IAAvB,CAApB;cACMiD,QAAQ,GAAGd,UAAA,CAAcX,KAAd,EAAqBrG,SAArB,CAAjB;cACM+H,MAAM,GAAG,MAAMf,QAAA,CAAYX,KAAZ,EAAmBrG,SAAnB,CAArB;cACMgI,OAAO,GAAGhB,UAAA,CAAce,MAAd,EAAsB/H,SAAtB,CAAhB;QACAuD,WAAM,CAACC,KAAP,CAAasE,QAAb,EAAuB9N,IAAI,CAAC4N,SAAS,EAAV,CAA3B,EAA0C,OAA1C;QACArE,WAAM,CAACC,KAAP,CAAawE,OAAb,EAAsBhO,IAAI,CAAC4N,SAAS,EAAV,CAA1B,EAAyC,MAAzC;OANF;;WASK,MAAMlH,OAAX,IAAsBiH,IAAtB,EAA4B;YACtBjH,OAAO,KAAK,EAAhB,EAAoB;gBACZmH,QAAQ,CAAC,CAAC,GAAD,EAAO,GAAEH,OAAQ,EAAjB,EAAoB,CAApB,EAAuBO,IAAvB,CAA4B,GAA5B,CAAD,CAAd;UACAL,SAAS,IAAI,CAAb;gBACMC,QAAQ,CAAC,CAACH,OAAD,EAAU,CAAV,CAAD,CAAd;SAHF,MAIO;gBACCG,QAAQ,CAAC,CAAC,GAAD,EAAO,GAAEnH,OAAQ,GAAjB,EAAsB,GAAEnC,QAAS,GAAjC,EAAsC,GAAEmJ,OAAQ,GAAhD,EAAoD,CAApD,EAAuDO,IAAvD,CAA4D,GAA5D,CAAD,CAAd;gBACMJ,QAAQ,CAAC,CAAC,GAAD,EAAO,GAAEnH,OAAQ,GAAjB,EAAsB,GAAEnC,QAAS,GAAjC,EAAsC,GAAEmJ,OAAQ,GAAhD,EAAoD,CAApD,EAAuDO,IAAvD,CAA4D,GAA5D,CAAD,CAAd;UACAL,SAAS,IAAI,CAAb;gBACMC,QAAQ,CAAC,CAACnH,OAAO,GAAGgD,QAAX,EAAqBnF,QAAQ,GAAGmF,QAAhC,EAA0CgE,OAAO,GAAGhE,QAApD,EAA8D,CAA9D,CAAD,CAAd;gBACMmE,QAAQ,CAAC,CAACnH,OAAO,GAAGgD,QAAX,EAAqBnF,QAAQ,GAAGmF,QAAhC,EAA0CgE,OAAO,GAAGhE,QAApD,EAA8D,CAA9D,CAAD,CAAd;;;KAnCJ,CAAF;GADF;EA0CAqD,QAAc,CAACmB,OAAf,CAAuB7E,OAAvB,CAA+BrJ,IAAI,IAAI;IACrCsJ,QAAE,CAAE,+BAA8BtJ,IAAI,CAAC,CAAD,CAAI,cACxCA,IAAI,CAAC,CAAD,CACL,EAFC,EAEE,kBAAkB;YACd6K,IAAI,GAAGqB,YAAA,CAAgBlM,IAAI,CAAC,CAAD,CAApB,CAAb;YACMyN,SAAS,GAAGT,YAAA,CAAgBhN,IAAI,CAAC,CAAD,CAApB,CAAlB;UACI4N,SAAS,GAAG,CAAhB;;aACO/C,IAAI,CAACzK,MAAZ,EAAoB;cACZiM,KAAK,GAAG,MAAMW,QAAA,CAAYS,SAAZ,EAAuB5C,IAAvB,CAApB;cACMiD,QAAQ,GAAGd,UAAA,CAAcX,KAAd,EAAqBrG,SAArB,CAAjB;cACMyD,SAAS,GAAG,MAAMuD,QAAA,CAAYX,KAAZ,EAAmBrG,SAAnB,CAAxB;cACMgI,OAAO,GAAGhB,UAAA,CAAcvD,SAAd,EAAyBzD,SAAzB,CAAhB;QACAuD,WAAM,CAACC,KAAP,CAAasE,QAAb,EAAuB9N,IAAI,CAAC4N,SAAD,CAAJ,CAAgB,CAAhB,CAAvB,EAA2C,OAA3C;QACArE,WAAM,CAACC,KAAP,CAAawE,OAAb,EAAsBhO,IAAI,CAAC4N,SAAD,CAAJ,CAAgB,CAAhB,CAAtB,EAA0C,MAA1C;QACA/C,IAAI,CAACsD,GAAL;QACAP,SAAS;;KAdX,CAAF;GADF;CAhGM,CAAR;AAqHA5H,SAAO,GAAGoI,UAAa,CAACpI,OAAxB;AAEAmD,cAAQ,CAAC,yBAAD,EAA4B,YAAY;EAC9CiF,UAAa,CAACjB,MAAd,CAAqB9D,OAArB,CAA6BrJ,IAAI,IAAI;UAC7BoN,SAAS,GAAGpN,IAAI,CAAC,CAAD,CAAtB;UACMyJ,SAAS,GAAG;MAChBA,SAAS,EAAEzJ,IAAI,CAAC,CAAD,CADC;MAEhBoK,OAAO,EAAEpK,IAAI,CAAC,CAAD,CAFG;MAGhBkK,KAAK,EAAElK,IAAI,CAAC,CAAD,CAHK;MAIhBiK,iBAAiB,EAAEjK,IAAI,CAAC,CAAD,CAJP;MAKhBgK,WAAW,EAAEhK,IAAI,CAAC,CAAD,CALD;MAMhBqK,SAAS,EAAErK,IAAI,CAAC,CAAD;KANjB;IASAsJ,QAAE,CAAE,yBAAwBtJ,IAAI,CAAC,CAAD,CAAI,EAAlC,EAAqC,YAAY;YAC3CqN,YAAY,GAAGL,YAAA,CAAgBI,SAAhB,EAA2BpH,SAA3B,CAArB;MACAuD,WAAM,CAAC2D,SAAP,CAAiBG,YAAjB,EAA+B5D,SAA/B;KAFA,CAAF;IAKAH,QAAE,CAAE,uBAAsBtJ,IAAI,CAAC,CAAD,CAAI,EAAhC,EAAmC,YAAY;YACzCsN,iBAAiB,GAAGN,UAAA,CAAcvD,SAAd,EAAyBzD,SAAzB,CAA1B;MACAuD,WAAM,CAACC,KAAP,CAAa8D,iBAAb,EAAgCF,SAAhC;KAFA,CAAF;GAhBF;EAsBAgB,UAAa,CAACzC,OAAd,CAAsBtC,OAAtB,CAA8BrJ,IAAI,IAAI;IACpCsJ,QAAE,CAAE,gBAAetJ,IAAI,CAAC,CAAD,CAAI,cAAaA,IAAI,CAAC,CAAD,CAAI,EAA9C,EAAiD,kBAAkB;YAC7DyJ,SAAS,GAAGzJ,IAAI,CAAC,CAAD,CAAtB;YACMqK,SAAS,GAAGrK,IAAI,CAAC,CAAD,CAAtB;YACMyK,KAAK,GAAGzK,IAAI,CAAC,CAAD,CAAlB;YACMuN,gBAAgB,GAAG;QACvB9D,SAAS,EAAEzJ,IAAI,CAAC,CAAD,CADQ;QAEvBqK,SAAS,EAAErK,IAAI,CAAC,CAAD,CAFQ;QAGvBgK,WAAW,EAAEhK,IAAI,CAAC,CAAD;OAHnB;YAKM0L,IAAI,GAAGsB,QAAA,CAAc;QAAEvD,SAAF;QAAaY;OAA3B,CAAb;YACM0B,QAAQ,GAAG,MAAMiB,SAAA,CAAatB,IAAb,EAAmBjB,KAAnB,CAAvB;MACAlB,WAAM,CAAC2D,SAAP,CAAiB;QACfzD,SAAS,EAAEsC,QAAQ,CAACtC,SADL;QAEfY,SAAS,EAAE0B,QAAQ,CAAC1B,SAFL;QAGfL,WAAW,EAAE+B,QAAQ,CAAC/B;OAHxB,EAIGuD,gBAJH;KAXA,CAAF;GADF;CAvBM,CAAR;;AC1HA,MAAM;WAAEvH;IAAYqI,QAApB;AAEAlF,cAAQ,CAAC,mBAAD,EAAsB,YAAY;EACxCkF,QAAQ,CAAChD,QAAT,CAAkBhC,OAAlB,CAA0BrJ,IAAI,IAAI;IAChCsJ,QAAE,CAAE,mBAAkBtJ,IAAI,CAAC,CAAD,CAAI,EAA5B,EAA+B,YAAY;YACrC+L,QAAQ,GAAGU,QAAA,CAAezM,IAAI,CAAC,CAAD,CAAnB,EAAwBgG,SAAxB,CAAjB;YACMiH,IAAI,GAAGR,UAAA,CAAeV,QAAf,CAAb;MACAxC,WAAM,CAAC2D,SAAP,CAAiBD,IAAjB,EAAuBjN,IAAI,CAAC,CAAD,CAA3B;KAHA,CAAF;GADF;EAQAqO,QAAQ,CAAClB,MAAT,CAAgB9D,OAAhB,CAAwBrJ,IAAI,IAAI;UACxBoN,SAAS,GAAGpN,IAAI,CAAC,CAAD,CAAtB;UACM6I,UAAU,GAAG;MACjBA,UAAU,EAAE7I,IAAI,CAAC,CAAD,CADC;MAEjBoK,OAAO,EAAEpK,IAAI,CAAC,CAAD,CAFI;MAGjBkK,KAAK,EAAElK,IAAI,CAAC,CAAD,CAHM;MAIjBiK,iBAAiB,EAAEjK,IAAI,CAAC,CAAD,CAJN;MAKjBgK,WAAW,EAAEhK,IAAI,CAAC,CAAD,CALA;MAMjBqK,SAAS,EAAErK,IAAI,CAAC,CAAD;KANjB;IASAsJ,QAAE,CAAE,sBAAqBtJ,IAAI,CAAC,CAAD,CAAI,EAA/B,EAAkC,YAAY;YACxCqN,YAAY,GAAGZ,YAAA,CAAiBW,SAAjB,EAA4BpH,SAA5B,CAArB;MACAuD,WAAM,CAAC2D,SAAP,CAAiBG,YAAjB,EAA+BxE,UAA/B;KAFA,CAAF;IAKAS,QAAE,CAAE,oBAAmBtJ,IAAI,CAAC,CAAD,CAAI,EAA7B,EAAgC,YAAY;YACtCsN,iBAAiB,GAAGb,UAAA,CAAe5D,UAAf,EAA2B7C,SAA3B,CAA1B;MACAuD,WAAM,CAACC,KAAP,CAAa8D,iBAAb,EAAgCF,SAAhC;KAFA,CAAF;GAhBF;EAsBAiB,QAAQ,CAAC1C,OAAT,CAAiBtC,OAAjB,CAAyBrJ,IAAI,IAAI;IAC/BsJ,QAAE,CAAE,kBAAiBtJ,IAAI,CAAC,CAAD,CAAI,cAAaA,IAAI,CAAC,CAAD,CAAI,EAAhD,EAAmD,kBAAkB;YAC/D6I,UAAU,GAAG7I,IAAI,CAAC,CAAD,CAAvB;YACMqK,SAAS,GAAGrK,IAAI,CAAC,CAAD,CAAtB;YACMyK,KAAK,GAAGzK,IAAI,CAAC,CAAD,CAAlB;YACMyJ,SAAS,GAAGzJ,IAAI,CAAC,CAAD,CAAJ,IAAW,IAA7B;YACMuN,gBAAgB,GAAG;QACvB1E,UAAU,EAAE7I,IAAI,CAAC,CAAD,CADO;QAEvBqK,SAAS,EAAErK,IAAI,CAAC,CAAD,CAFQ;QAGvBgK,WAAW,EAAEhK,IAAI,CAAC,CAAD;OAHnB;YAKM0L,IAAI,GAAGe,SAAA,CAAgB;QAAE5D,UAAF;QAAcwB,SAAd;QAAyBZ;OAAzC,CAAb;YACMsC,QAAQ,GAAG,MAAMU,OAAA,CAAcf,IAAd,EAAoBjB,KAApB,CAAvB;MACAlB,WAAM,CAAC2D,SAAP,CAAiB;QACfrE,UAAU,EAAEkD,QAAQ,CAAClD,UADN;QAEfwB,SAAS,EAAE0B,QAAQ,CAAC1B,SAFL;QAGfL,WAAW,EAAE+B,QAAQ,CAAC/B;OAHxB,EAIGuD,gBAJH;KAZA,CAAF;GADF;EAqBAc,QAAQ,CAACb,OAAT,CAAiBnE,OAAjB,CAAyBrJ,IAAI,IAAI;IAC/BsJ,QAAE,CAAE,gBAAetJ,IAAI,CAAC,CAAD,CAAI,aAAYA,IAAI,CAAC,CAAD,CAAI,EAA7C,EAAgD,kBAAkB;YAC5DiN,IAAI,GAAGjN,IAAI,CAAC,CAAD,CAAjB;YACMyN,SAAS,GAAGhB,YAAA,CAAiBQ,IAAjB,EAAuBjH,SAAvB,CAAlB;UAEI0H,OAAO,GAAG,CAAd;UACInJ,QAAQ,GAAG,CAAf;UACIoJ,IAAI,GAAG3N,IAAI,CAAC,CAAD,CAAf;UACI,CAAC2N,IAAL,EAAWA,IAAI,GAAG,CAAC,EAAD,CAAP;;UACP3N,IAAI,CAAC,CAAD,CAAR,EAAa;QACX0N,OAAO,GAAG1N,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAV;QACAuE,QAAQ,GAAGvE,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAX;;;UAEE4N,SAAS,GAAG,CAAhB;;YAEMC,QAAQ,GAAG,MAAOhD,IAAP,IAAgB;cACzBwB,KAAK,GAAG,MAAMI,MAAA,CAAagB,SAAb,EAAwB5C,IAAxB,CAApB;cACMiD,QAAQ,GAAGrB,UAAA,CAAeJ,KAAf,EAAsBrG,SAAtB,CAAjB;cACM+H,MAAM,GAAG,MAAMtB,MAAA,CAAaJ,KAAb,CAArB;cACM2B,OAAO,GAAGtB,UAAA,CAAcqB,MAAd,EAAsB/H,SAAtB,CAAhB;QACAuD,WAAM,CAACC,KAAP,CAAasE,QAAb,EAAuB9N,IAAI,CAAC4N,SAAS,EAAV,CAA3B,EAA0C,OAA1C;QACArE,WAAM,CAACC,KAAP,CAAawE,OAAb,EAAsBhO,IAAI,CAAC4N,SAAS,EAAV,CAA1B,EAAyC,MAAzC;OANF;;WASK,MAAMlH,OAAX,IAAsBiH,IAAtB,EAA4B;YACtBjH,OAAO,KAAK,EAAhB,EAAoB;gBACZmH,QAAQ,CAAC,CAAC,GAAD,EAAO,GAAEH,OAAQ,EAAjB,EAAoB,CAApB,EAAuBO,IAAvB,CAA4B,GAA5B,CAAD,CAAd;UACAL,SAAS,IAAI,CAAb;gBACMC,QAAQ,CAAC,CAACH,OAAD,EAAU,CAAV,CAAD,CAAd;SAHF,MAIO;gBACCG,QAAQ,CAAC,CAAC,GAAD,EAAO,GAAEnH,OAAQ,GAAjB,EAAsB,GAAEnC,QAAS,GAAjC,EAAsC,GAAEmJ,OAAQ,GAAhD,EAAoD,CAApD,EAAuDO,IAAvD,CAA4D,GAA5D,CAAD,CAAd;gBACMJ,QAAQ,CAAC,CAAC,GAAD,EAAO,GAAEnH,OAAQ,GAAjB,EAAsB,GAAEnC,QAAS,GAAjC,EAAsC,GAAEmJ,OAAQ,GAAhD,EAAoD,CAApD,EAAuDO,IAAvD,CAA4D,GAA5D,CAAD,CAAd;UACAL,SAAS,IAAI,CAAb;gBACMC,QAAQ,CAAC,CAACnH,OAAO,GAAGgD,QAAX,EAAqBnF,QAAQ,GAAGmF,QAAhC,EAA0CgE,OAAO,GAAGhE,QAApD,EAA8D,CAA9D,CAAD,CAAd;gBACMmE,QAAQ,CAAC,CAACnH,OAAO,GAAGgD,QAAX,EAAqBnF,QAAQ,GAAGmF,QAAhC,EAA0CgE,OAAO,GAAGhE,QAApD,EAA8D,CAA9D,CAAD,CAAd;;;KAjCJ,CAAF;GADF;EAwCA2E,QAAQ,CAACH,OAAT,CAAiB7E,OAAjB,CAAyBrJ,IAAI,IAAI;IAC/BsJ,QAAE,CAAE,gCAA+BtJ,IAAI,CAAC,CAAD,CAAI,cACzCA,IAAI,CAAC,CAAD,CACL,EAFC,EAEE,kBAAkB;YACd6K,IAAI,GAAGqB,YAAA,CAAgBlM,IAAI,CAAC,CAAD,CAApB,CAAb;YACMyN,SAAS,GAAGhB,YAAA,CAAiBzM,IAAI,CAAC,CAAD,CAArB,CAAlB;UACI4N,SAAS,GAAG,CAAhB;;aACO/C,IAAI,CAACzK,MAAZ,EAAoB;cACZiM,KAAK,GAAG,MAAMI,MAAA,CAAagB,SAAb,EAAwB5C,IAAxB,CAApB;cACMiD,QAAQ,GAAGrB,UAAA,CAAeJ,KAAf,EAAsBrG,SAAtB,CAAjB;cACMyD,SAAS,GAAG,MAAMgD,MAAA,CAAaJ,KAAb,EAAoBrG,SAApB,CAAxB;cACMgI,OAAO,GAAGtB,UAAA,CAAcjD,SAAd,EAAyBzD,SAAzB,CAAhB;QACAuD,WAAM,CAACC,KAAP,CAAasE,QAAb,EAAuB9N,IAAI,CAAC4N,SAAD,CAAJ,CAAgB,CAAhB,CAAvB,EAA2C,OAA3C;QACArE,WAAM,CAACC,KAAP,CAAawE,OAAb,EAAsBhO,IAAI,CAAC4N,SAAD,CAAJ,CAAgB,CAAhB,CAAtB,EAA0C,MAA1C;QACA/C,IAAI,CAACsD,GAAL;QACAP,SAAS;;KAdX,CAAF;GADF;CA5FM,CAAR;;ACJA,MAAM;WAAE5H;IAAYqI,UAApB;AAEAlF,cAAQ,CAAC,cAAD,EAAiB,YAAY;EACnCkF,UAAQ,CAAClB,MAAT,CAAgB9D,OAAhB,CAAwBrJ,IAAI,IAAI;UACxBoN,SAAS,GAAGpN,IAAI,CAAC,CAAD,CAAtB;UACMyJ,SAAS,GAAG;MAChBA,SAAS,EAAEzJ,IAAI,CAAC,CAAD,CADC;MAEhBoK,OAAO,EAAEpK,IAAI,CAAC,CAAD,CAFG;MAGhBkK,KAAK,EAAElK,IAAI,CAAC,CAAD,CAHK;MAIhBiK,iBAAiB,EAAEjK,IAAI,CAAC,CAAD,CAJP;MAKhBgK,WAAW,EAAEhK,IAAI,CAAC,CAAD,CALD;MAMhBqK,SAAS,EAAErK,IAAI,CAAC,CAAD;KANjB;IASAsJ,QAAE,CAAE,qBAAoBtJ,IAAI,CAAC,CAAD,CAAI,EAA9B,EAAiC,YAAY;YACvCqN,YAAY,GAAGX,YAAA,CAAgBU,SAAhB,EAA2BpH,SAA3B,CAArB;MACAuD,WAAM,CAAC2D,SAAP,CAAiBG,YAAjB,EAA+B5D,SAA/B;KAFA,CAAF;IAKAH,QAAE,CAAE,mBAAkBtJ,IAAI,CAAC,CAAD,CAAI,EAA5B,EAA+B,YAAY;YACrCsN,iBAAiB,GAAGZ,UAAA,CAAcjD,SAAd,EAAyBzD,SAAzB,CAA1B;MACAuD,WAAM,CAACC,KAAP,CAAa8D,iBAAb,EAAgCF,SAAhC;KAFA,CAAF;GAhBF;EAsBAiB,UAAQ,CAAC1C,OAAT,CAAiBtC,OAAjB,CAAyBrJ,IAAI,IAAI;IAC/BsJ,QAAE,CAAE,iBAAgBtJ,IAAI,CAAC,CAAD,CAAI,cAAaA,IAAI,CAAC,CAAD,CAAI,EAA/C,EAAkD,kBAAkB;YAC9DyJ,SAAS,GAAGzJ,IAAI,CAAC,CAAD,CAAtB;YACMqK,SAAS,GAAGrK,IAAI,CAAC,CAAD,CAAtB;YACMyK,KAAK,GAAGzK,IAAI,CAAC,CAAD,CAAlB;YACMuN,gBAAgB,GAAG;QACvB9D,SAAS,EAAEzJ,IAAI,CAAC,CAAD,CADQ;QAEvBqK,SAAS,EAAErK,IAAI,CAAC,CAAD,CAFQ;QAGvBgK,WAAW,EAAEhK,IAAI,CAAC,CAAD;OAHnB;YAKM0L,IAAI,GAAGgB,QAAA,CAAc;QAAEjD,SAAF;QAAaY;OAA3B,CAAb;YACM0B,QAAQ,GAAG,MAAMW,SAAA,CAAahB,IAAb,EAAmBjB,KAAnB,CAAvB;MACAlB,WAAM,CAAC2D,SAAP,CAAiB;QACfzD,SAAS,EAAEsC,QAAQ,CAACtC,SADL;QAEfY,SAAS,EAAE0B,QAAQ,CAAC1B,SAFL;QAGfL,WAAW,EAAE+B,QAAQ,CAAC/B;OAHxB,EAIGuD,gBAJH;KAXA,CAAF;GADF;CAvBM,CAAR;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFA,aAAe;EACbjG,KAAK,EAAE,YADM;EAEbgH,QAAQ,EAAE,CACR,GAAG3O,MAAM,CAACyJ,IAAP,CAAYmF,WAAW,CAACC,YAAxB,CADK,EAER,GAAG7O,MAAM,CAACyJ,IAAP,CAAYmF,WAAW,CAACE,eAAxB,CAFK,EAGR,UAHQ,EAIR,UAJQ,CAFG;EAQblH,MAAM,EAAE,CACN;IAAEmH,IAAI,EAAEH,WAAW,CAACjK,IAApB;IAA0BqK,MAAM,EAAE,KAAlC;IAAyCC,SAAS,EAAE;GAD9C,EAEN;IAAEF,IAAI,EAAEH,WAAW,CAACM,MAApB;IAA4BF,MAAM,EAAE,IAApC;IAA0CC,SAAS,EAAE;GAF/C,CARK;EAYbE,OAAO,EAAE,CACPC,IAAI,EADG,EAEPC,KAAK,CAAC;IACJC,OAAO,EAAE,KADL;IAEJC,OAAO,EAAE,CAAC,oBAAD,CAFL;IAGJJ,OAAO,EAAE,CAAC,2CAAD;GAHN,CAFE,EAOPK,SAAS,EAPF;CAZX;;ACFA,MAAMC,YAAY,GAAG;EACnBH,OAAO,EAAE,KADU;EAEnBC,OAAO,EAAE,CAAC,oBAAD,CAFU;EAGnBJ,OAAO,EAAE,CAAC,2CAAD;CAHX;AAMA,CAAe;EACbR,QAAQ,EAAEe,MAAM,CAACf,QADJ;EAEbhH,KAAK,EAAE,gBAFM;EAGbC,MAAM,EAAE,CACN;IAAEmH,IAAI,EAAE,oBAAR;IAA8BC,MAAM,EAAE,KAAtC;IAA6CC,SAAS,EAAE;GADlD,EAEN;IAAEF,IAAI,EAAE,gBAAR;IAA0BC,MAAM,EAAE,IAAlC;IAAwCC,SAAS,EAAE;GAF7C,CAHK;EAObE,OAAO,EAAE,CAACQ,UAAU,EAAX,EAAeP,IAAI,EAAnB,EAAuBC,KAAK,CAACI,YAAD,CAA5B;EAPX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHA,MAAMhO,IAAI,GACR,4EADF;AAEA,MAAMO,GAAG,GAAG,kEAAZ;AACA,MAAMkG,GAAG,GACP,kIADF;AAGA,MAAM1G,IAAI,GAAGa,UAAU,CAACL,GAAD,EAAMP,IAAN,CAAvB;AACAmI,WAAM,CAACC,KAAP,CAAarI,IAAb,EAAmB0G,GAAnB;;AAEA,KAAK,MAAM0H,OAAX,IAAsBlB,UAAtB,EAAgC;EAC9BlF,cAAQ,CAAE,gBAAeoG,OAAQ,EAAzB,EAA4B,YAAY;UACxCC,WAAW,GAAGlN,IAAI,CAACiN,OAAD,CAAJ,CAAchM,KAAlC;IAEA8K,UAAQ,CAACkB,OAAD,CAAR,CAAkBE,KAAlB,CAAwBpG,OAAxB,CAAgC,CAAC;MAAE8D,MAAF;MAAUpK;KAAX,KAAyB;MACvDuG,QAAE,CAAE,wBAAuB6D,MAAO,EAAhC,EAAmC,kBAAkB;cAC/CuC,cAAc,GAAGF,WAAW,CAAC3M,MAAZ,CAAmBsK,MAAnB,CAAvB;QACA5D,WAAM,CAACC,KAAP,CAAakG,cAAb,EAA6B3M,OAA7B;OAFA,CAAF;MAIAuG,QAAE,CAAE,yBAAwBvG,OAAQ,EAAlC,EAAqC,kBAAkB;cACjD4M,cAAc,GAAGH,WAAW,CAAChN,MAAZ,CAAmBO,OAAnB,CAAvB;QACAwG,WAAM,CAACC,KAAP,CAAamG,cAAb,EAA6BxC,MAA7B;OAFA,CAAF;KALF;IAWAkB,UAAQ,CAACkB,OAAD,CAAR,CAAkBK,OAAlB,CAA0BvG,OAA1B,CAAkC,CAAC;MAAE8D,MAAF;MAAU0C;KAAX,KAA2B;MAC3DvG,QAAE,CAAE,wBAAuB6D,MAAO,EAAhC,EAAmC,kBAAkB;YACjD;UACFqC,WAAW,CAAC3M,MAAZ,CAAmBsK,MAAnB;SADF,CAEE,OAAO1G,CAAP,EAAU;UACV8C,WAAM,CAACC,KAAP,CAAa/C,CAAC,CAAC0E,OAAf,EAAwB0E,SAAxB;;OAJF,CAAF;KADF;GAdM,CAAR;;;MCnBWC,OAAO,GAAG;EACrBC,KAAK,EAAE,CADc;EAErBC,KAAK,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAFc;EAGrBC,OAAO,EAAE;IAAEC,KAAK,EAAE;GAHG;EAIrBC,KAAK,EAAE;IACLC,IAAI,EAAE,CADD;IAELC,IAAI,EAAE;GANa;EAQrBC,OAAO,EAAE;IACPF,IAAI,EAAE,CADC;IAEPC,IAAI,EAAE;GAVa;EAYrBE,IAAI,EAAE;IACJC,OAAO,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CADL;IAEJC,IAAI,EAAE;MACJN,KAAK,EAAE;QACLC,IAAI,EAAE,CADD;QAELC,IAAI,EAAE;OAHJ;MAKJK,MAAM,EAAE;QACNN,IAAI,EAAE,CADA;QAENC,IAAI,EAAE;OAPJ;MASJM,IAAI,EAAE,CACJ;QAAEP,IAAI,EAAE;OADJ,EAEJ,CAFI,EAGJ;QAAEC,IAAI,EAAE;OAHJ,EAIJ;QAAEA,IAAI,EAAE,CAAR;QAAWD,IAAI,EAAE;OAJb,EAKJ;QAAEH,OAAO,EAAE;UAAEC,KAAK,EAAE;;OALhB,EAMJ;QAAEH,KAAK,EAAE;OANL,EAOJ,CAAE,CAAF,EAAK;QAAEM,IAAI,EAAE;OAAb,EAAkB,EAAlB,CAPI,CATF;MAkBJO,QAAQ,EAAE;;;CAhCT;AAqCP,MAAavC,UAAQ,GAAG,CACtB,CAAE,EAAF,EAAM,CAACyB,OAAD,CAAN,CADsB,EAGtB,CAAE,CAAC,QAAD,CAAF,EAAc,EAAd,CAHsB,EAKtB,CAAE,CAAC,MAAD,CAAF,EAAY,EAAZ,CALsB,EAOtB,CAAE,CAAC,SAAD,CAAF,EAAe,CACbA,OAAO,CAAC,OAAD,CAAP,CAAiB,MAAjB,CADa,EAEbA,OAAO,CAAC,SAAD,CAAP,CAAmB,MAAnB,CAFa,EAGbA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,OAAxB,EAAiC,MAAjC,CAHa,EAIbA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,QAAxB,EAAkC,MAAlC,CAJa,EAKbA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,MAAxB,EAAgC,CAAhC,EAAmC,MAAnC,CALa,EAMbA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,MAAxB,EAAgC,CAAhC,EAAmC,MAAnC,CANa,EAObA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,MAAxB,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,MAAtC,CAPa,CAAf,CAPsB,EAiBtB,CAAE,CAAC,YAAD,CAAF,EAAkB,CAChBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,MAAxB,EAAgC,CAAhC,EAAmC,SAAnC,CADgB,EAEhBA,OAAO,CAAC,SAAD,CAFS,CAAlB,CAjBsB,EAsBtB,CAAE,CAAC,iBAAD,EAAoB,CAApB,CAAF,EAA0B,CACxBA,OAAO,CAAC,SAAD,CADiB,CAA1B,CAtBsB,EA0BtB,CAAE,CAAC,eAAD,EAAkB,CAAlB,CAAF,EAAwB,CACtBA,OAAO,CAAC,SAAD,CADe,CAAxB,CA1BsB,EA8BtB,CAAE,CAAC,sBAAD,EAAyB,CAAzB,CAAF,EAA+B,CAC7BA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,OAAxB,CAD6B,CAA/B,CA9BsB,EAkCtB,CAAE,CAAC,QAAD,EAAW,CAAX,CAAF,EAAiB,EAAjB,CAlCsB,EAoCtB,CAAE,CAAC,MAAD,EAAS,CAAT,CAAF,EAAe,EAAf,CApCsB,EAsCtB,CAAE,CAAC,UAAD,EAAa,CAAb,CAAF,EAAmB,CACjBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,MAAxB,EAAgC,CAAhC,CADiB,EAEjBA,OAFiB,CAAnB,CAtCsB,EA2CtB,CAAE,CAAC,UAAD,EAAa,CAAb,CAAF,EAAmB,EAAnB,CA3CsB,EA6CtB,CAAE,CAAC,YAAD,EAAe,CAAf,CAAF,EAAqB,EAArB,CA7CsB,EA+CtB,CAAE,CAAC,UAAD,EAAa,CAAb,CAAF,EAAmB,CACjBA,OAAO,CAAC,SAAD,CADU,EAEjBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,MAAxB,EAAgC,CAAhC,EAAmC,SAAnC,CAFiB,CAAnB,CA/CsB,EAoDtB,CAAE,CAAC,kBAAD,EAAqB,CAArB,CAAF,EAA2B,CACzBA,OAAO,CAAC,SAAD,CADkB,EAEzBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,MAAxB,EAAgC,CAAhC,EAAmC,SAAnC,CAFyB,CAA3B,CApDsB,EAyDtB,CAAE,CAAC,eAAD,EAAkB,CAAlB,CAAF,EAAwB,EAAxB,CAzDsB,EA2DtB,CAAE,CAAC,eAAD,EAAkB,CAAlB,CAAF,EAAwB,EAAxB,CA3DsB,EA6DtB,CAAE,CAAC,yBAAD,EAA4B,CAA5B,CAAF,EAAkC,CAACA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,OAAxB,CAAD,CAAlC,CA7DsB,EA+DtB,CAAE,CAAC,yBAAD,EAA4B,CAA5B,CAAF,EAAkC,EAAlC,CA/DsB,EAiEtB,CAAE,CAAC,uBAAD,EAA0B,CAA1B,CAAF,EAAgC,CAACA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,CAAD,CAAhC,CAjEsB,EAmEtB,CAAE,CAAC,eAAD,EAAkB,CAAlB,CAAF,EAAwB,CACtBA,OAAO,CAAC,OAAD,CADe,EAEtBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,OAAxB,CAFsB,CAAxB,CAnEsB,EAwEtB,CAAE,CAAC,SAAD,EAAY,CAAZ,CAAF,EAAkB,CAChBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,QAAxB,CADgB,EAEhBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,MAAxB,EAAgC,CAAhC,CAFgB,EAGhBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,MAAxB,EAAgC,CAAhC,EAAmC,CAAnC,CAHgB,CAAlB,CAxEsB,EA8EtB,CAAE,CAAC,SAAD,EAAY,CAAZ,CAAF,EAAkB,CAChBA,OAAO,CAAC,OAAD,CADS,EAEhBA,OAAO,CAAC,SAAD,CAFS,EAGhBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,OAAxB,CAHgB,CAAlB,CA9EsB,EAoFtB,CAAE,CAAC,SAAD,EAAY,CAAZ,CAAF,EAAkB,CAChBA,OAAO,CAAC,OAAD,CADS,EAEhBA,OAAO,CAAC,SAAD,CAFS,EAGhBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,OAAxB,CAHgB,EAIhBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,QAAxB,CAJgB,EAKhBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,MAAxB,EAAgC,CAAhC,CALgB,CAAlB,CApFsB,EA4FtB,CAAE,CAAC,gBAAD,EAAmB,CAAnB,CAAF,EAAyB,CACvBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,MAAxB,EAAgC,CAAhC,EAAmC,SAAnC,CADuB,CAAzB,CA5FsB,EAgGtB,CAAE,CAAC,gBAAD,EAAmB,CAAnB,CAAF,EAAyB,CACvBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,MAAxB,EAAgC,CAAhC,EAAmC,SAAnC,CADuB,CAAzB,CAhGsB,EAoGtB,CAAE,CAAC,iBAAD,EAAoB,CAApB,CAAF,EAA0B,CACxBA,OAAO,CAAC,MAAD,CAAP,CAAgB,SAAhB,CADwB,CAA1B,CApGsB,EAwGtB,CAAE,CAAC,UAAD,EAAa,CAAb,CAAF,EAAmB,EAAnB,CAxGsB,EA0GtB,CAAE,CAAC,UAAD,EAAa,CAAb,CAAF,EAAmB,CAACA,OAAO,CAAC,OAAD,CAAR,CAAnB,CA1GsB,EA4GtB,CAAE,CAAC,UAAD,CAAF,EAAgB,CACdA,OAAO,CAAC,OAAD,CADO,CAAhB,CA5GsB,EAgHtB,CAAE,CAAC,OAAD,CAAF,EAAa,CACXA,OAAO,CAAC,OAAD,CADI,CAAb,CAhHsB,EAoHtB,CAAE,CAAC,SAAD,CAAF,EAAe,CACbA,OAAO,CAAC,OAAD,CADM,CAAf,CApHsB,EAwHtB,CAAE,CAAC,gBAAD,CAAF,EAAsB,CACpBA,OAAO,CAAC,MAAD,CAAP,CAAgB,SAAhB,CADoB,CAAtB,CAxHsB,EA4HtB,CAAE,CAAC,SAAD,CAAF,EAAe,CACbA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,MAAxB,CADa,CAAf,CA5HsB,EAgItB,CAAE,CAAC,eAAD,CAAF,EAAqB,CACnBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,OAAxB,CADmB,EAEnBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,QAAxB,CAFmB,EAGnBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,MAAxB,CAHmB,EAInBA,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwB,UAAxB,CAJmB,CAArB,CAhIsB,EAuItB,CAAE,CAAC,KAAD,CAAF,EAAW,CACTA,OAAO,CAAC,OAAD,CADE,EAETA,OAAO,CAAC,OAAD,CAFE,EAGTA,OAAO,CAAC,SAAD,CAHE,EAITA,OAAO,CAAC,OAAD,CAJE,EAKTA,OAAO,CAAC,SAAD,CALE,EAMTA,OAAO,CAAC,MAAD,CANE,CAAX,CAvIsB,CAAjB;;AC9BP,MAAMe,SAAS,GAAG,CAACC,KAAD,EAAwBhB,OAAxB,EAAsCiB,MAAtC,KAAkE;QAC5E;IAAEvK,KAAF;IAASY,OAAT;IAAkB4J,KAAlB;IAAyBnG;MAASiG,KAAxC,CADkF;;MAKhF,OAAOhB,OAAP,KAAmB,WAAnB,IACCkB,KAAK,IAAI5J,OAAO,CAAChH,MAAR,IAAkB4Q,KAF9B,EAEsC,OAAO5J,OAAP,CAN4C;;MAS9E,CAACyD,IAAI,CAACzK,MAAV,EAAkB;;QAEZoG,KAAK,KAAKyK,SAAd,EAAyB7J,OAAO,CAAC8J,IAAR,CAAapB,OAAb,EAAzB;SAEK,IAAItJ,KAAK,KAAKsJ,OAAd,EAAuB1I,OAAO,CAAC8J,IAAR,CAAaH,MAAb,EAAvB;WAEA,IAAI1L,KAAK,CAACC,OAAN,CAAcwK,OAAd,CAAJ,EAA4B;UAC/BA,OAAO,CAACzG,OAAR,CAAgB8H,CAAC,IAAIN,SAAS,CAACC,KAAD,EAAQK,CAAR,EAAWrB,OAAX,CAA9B;;GAPJ,MASO,IAAI,OAAOA,OAAP,KAAmB,QAAvB,EAAiC;;QAElC;MAAEjF;QAASiG,KAAf,CAFsC;;;QAMlC,CAACjG,IAAI,CAAC,CAAD,CAAT,EAAc;MACZA,IAAI,GAAGA,IAAI,CAACjI,KAAL,CAAW,CAAX,CAAP;;WACK,MAAMjB,GAAX,IAAkBmO,OAAlB,EAA2B;QACzBe,SAAS,CAACC,KAAD,EAAQhB,OAAO,CAACnO,GAAD,CAAf,EAAsBmO,OAAtB,CAAT;;;;UAIE/D,QAAQ,GAAGlB,IAAI,CAAC,CAAD,CAArB;;UACMuG,UAAU,qBAAQN,KAAR;MAAejG,IAAI,EAAEA,IAAI,CAACjI,KAAL,CAAW,CAAX;MAArC;;QAEImJ,QAAQ,KAAK,GAAjB,EAAsB;WACf,MAAMpK,GAAX,IAAkBmO,OAAlB,EAA2B;QACzBe,SAAS,CAACO,UAAD,EAAatB,OAAO,CAACnO,GAAD,CAApB,EAA2BmO,OAA3B,CAAT;;KAFJ,MAIO;;;MAGLe,SAAS,CAACO,UAAD,EAAatB,OAAO,CAAC/D,QAAD,CAApB,EAAgC+D,OAAhC,CAAT;;;;SAIG1I,OAAP;CA7CF;;AAgDA,AAAO,MAAMiK,MAAM,GAAG,CAACP,KAAD,EAA8BhB,OAA9B,KAA2D;MAC3E,OAAOgB,KAAP,KAAiB,QAArB,EAA+BA,KAAK,GAAG;IAAEjG,IAAI,EAAEiG;GAAhB;;QACzB;IAAEjG,IAAI,EAAEyG;MAAwBR,KAAtC;QAA6B1E,IAA7B,4BAAsC0E,KAAtC,YAF+E;;;MAI3E,CAACQ,UAAL,EAAiB,OAAO,CAACxB,OAAD,CAAP,CAJ8D;;QAMzEjF,IAAI,GAAGyG,UAAU,CAACtG,KAAX,CAAiB,GAAjB,CAAb,CAN+E;;MAQ3EH,IAAI,CAAC,CAAD,CAAJ,KAAY,GAAhB,EAAqBA,IAAI,CAACK,KAAL,GAR0D;;SAUxE2F,SAAS,mBAAMzE,IAAN;IAAYvB,IAAZ;IAAkBzD,OAAO,EAAE;MAAM0I,OAAjC,CAAhB;CAVK;;AC/CP3G,cAAQ,CAAC,qBAAD,EAAwB,YAAY;EAC1CkF,UAAQ,CAAChF,OAAT,CAAiB,CAAC,CAAErJ,IAAF,EAAQuR,QAAR,CAAD,KAAwB;IACvCjI,QAAE,CAAE,wBAAuBkI,IAAI,CAACC,SAAL,CAAezR,IAAf,CAAqB,eAA9C,EAA8D,YAAY;YACpE0R,YAAY,GAAG;QACnB7G,IAAI,EAAE7K,IAAI,CAAC,CAAD,CADS;QAEnBwG,KAAK,EAAExG,IAAI,CAAC,CAAD;OAFb;YAIMoH,OAAO,GAAGiK,MAAM,CAACK,YAAD,EAAe5B,OAAf,CAAtB;MACAvG,WAAM,CAAC2D,SAAP,CAAiB9F,OAAjB,EAA0BmK,QAA1B;KANA,CAAF;;SASK,IAAI7L,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI6L,QAAQ,CAACnR,MAA9B,EAAsCsF,CAAC,EAAvC,EAA2C;MACzC4D,QAAE,CAAE,wBAAuBkI,IAAI,CAACC,SAAL,CAAezR,IAAf,CAAqB,cAAa0F,CAAE,EAA7D,EAAgE,YAAY;cACtEgM,YAAY,GAAG;UACnB7G,IAAI,EAAE7K,IAAI,CAAC,CAAD,CADS;UAEnBwG,KAAK,EAAExG,IAAI,CAAC,CAAD,CAFQ;UAGnBgR,KAAK,EAAEtL;SAHT;cAKM0B,OAAO,GAAGiK,MAAM,CAACK,YAAD,EAAe5B,OAAf,CAAtB;QACAvG,WAAM,CAAC2D,SAAP,CAAiB9F,OAAjB,EAA0BmK,QAAQ,CAAC3O,KAAT,CAAe,CAAf,EAAkB8C,CAAlB,CAA1B;OAPA,CAAF;;GAXJ;CADM,CAAR;;ACAO,MAAMiM,OAAO,GAAG,CACrBC,IADqB,EAErBC,IAFqB,EAGrBC,KAAa,GAAG,GAHK,EAIrBC,KAAa,GAAG,EAJK,EAKrB3Q,IAAY,GAAG2Q,KALM,EAMrBC,MAAqB,GAAG,EANH,KAOlB;SACI,IAAI7S,KAAJ,CAAWQ,MAAM,CAACC,MAAP,CAAc,MAAMgS,IAAI,CAACG,KAAD,CAAxB,EAAiC3Q,IAAjC,CAAX,EAAyD;IAC9D6Q,KAAK,EAAE,OAAOnT,MAAP,EAAeoT,QAAf,EAAyB9S,IAAzB,KAAkC;YACjC+S,WAAW,GAAGC,QAAQ,IAAI;QAC9BL,KAAK,GAAGK,QAAR;QACAhR,IAAI,GAAGgR,QAAP;;aACK,MAAMzQ,GAAX,IAAkB7C,MAAlB,EAA0B;cACpBsC,IAAI,CAACO,GAAD,CAAJ,KAAcsP,SAAlB,EAA6B;mBACpBnS,MAAM,CAAC6C,GAAD,CAAb;;;;QAGJhC,MAAM,CAACC,MAAP,CAAcd,MAAd,EAAsBsT,QAAtB;OARF,CADuC;;;UAanC,CAACJ,MAAM,CAACK,MAAZ,EAAoB;cACZC,OAAO,GAAG,OAAOT,IAAP,KAAgB,UAAhB,GAA6B,MAAMA,IAAI,EAAvC,GAA4CA,IAA5D;QACAM,WAAW,mBAAMG,OAAN,EAAkBP,KAAlB,EAAX;QACAC,MAAM,CAACK,MAAP,GAAgB,IAAhB;OAhBqC;;;UAoBnCjT,IAAI,IAAIA,IAAI,CAACgB,MAAjB,EAAyB;YACnB,OAAOhB,IAAI,CAAC,CAAD,CAAX,KAAmB,QAAvB,EAAiC+S,WAAW,mBAAM/S,IAAI,CAAC,CAAD,CAAV,EAAX,CAAjC,KACK,IAAIA,IAAI,CAAC,CAAD,CAAJ,KAAY,MAAhB,EAAwB;cACvB4S,MAAM,CAACO,MAAX,EAAmB;YACjBC,YAAY,CAACR,MAAM,CAACO,MAAR,CAAZ;YACAP,MAAM,CAACO,MAAP,GAAgB,IAAhB;;;UAEFP,MAAM,CAACS,OAAP,GAAiB,KAAjB;gBACMC,OAAO,CAACT,KAAR,CAAcnT,MAAd,EAAsBA,MAAtB,EAA8B,EAA9B,CAAN;;;OA5BmC;;;UAkCnC,CAACkT,MAAM,CAACS,OAAR,IAAmBT,MAAM,CAACO,MAA9B,EAAsC,OAlCC;;MAqCvCP,MAAM,CAACS,OAAP,GAAiB,KAAjB,CArCuC;;MAwCvCT,MAAM,CAACO,MAAP,GAAgBI,UAAU,CAAC,MAAM;YAC3BX,MAAM,CAACO,MAAX,EAAmB;UACjBC,YAAY,CAACR,MAAM,CAACO,MAAR,CAAZ;UACAP,MAAM,CAACO,MAAP,GAAgB,IAAhB;;;QAEFG,OAAO,CAACT,KAAR,CAAcC,QAAd,EAAwBA,QAAxB,EAAkC,EAAlC;OALwB,EAMvBJ,KANuB,CAA1B;YAQMY,OAAO,CAACT,KAAR,CAAcnT,MAAd,EAAsBA,MAAtB,EAA8B,EAA9B,CAAN;KAjD4D;IAmD9DoG,GAAG,EAAE,CAACpG,MAAD,EAAcC,IAAd,EAA4ByH,KAA5B,EAAwCxH,QAAxC,KAA0D;;UAEzDoC,IAAI,CAACrC,IAAD,CAAJ,KAAeyH,KAAnB,EAA0B;QACxBkM,OAAO,CAACxN,GAAR,CAAY9D,IAAZ,EAAkBrC,IAAlB,EAAwByH,KAAxB;QACAkM,OAAO,CAACxN,GAAR,CAAYpG,MAAZ,EAAoBC,IAApB,EAA0ByH,KAA1B;QACAwL,MAAM,CAACS,OAAP,GAAiB,IAAjB;YACI,CAACT,MAAM,CAACO,MAAZ,EAAoBG,OAAO,CAACT,KAAR,CAAcjT,QAAd,EAAwBA,QAAxB,EAAkC,EAAlC;;;aAEf,IAAP;KA3D4D;IA6D9DH,GAAG,EAAE,CAACC,MAAD,EAAcC,IAAd,KAA+B;UAC9BA,IAAI,KAAK,QAAb,EAAuB,OAAOiT,MAAP,CADW;;YAG5BxL,KAAK,GAAGkM,OAAO,CAAC7T,GAAR,CAAYuC,IAAZ,EAAkBrC,IAAlB,CAAd,CAHkC;;UAK9B,OAAOyH,KAAP,KAAiB,QAArB,EAA+B,OAAOA,KAAP,CALG;;aAO3BmL,OAAO,CAACC,IAAD,EAAOC,IAAP,EAAaC,KAAb,EAAoBC,KAApB,EAA2BvL,KAA3B,EAAkCwL,MAAlC,CAAd;;GApEG,CAAP;CARK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAP,MAAMY,UAAU,GAAG,CAACrB,QAAD,EAAgBO,KAAhB,EAA+Be,GAA/B,KAA4C;MACzDC,YAAY,GAAG,CAAC,CAApB;MACIC,aAAa,GAAG,CAApB;SAEO,MAAMC,SAAN,IAAmB;QACpBH,GAAG,CAACI,IAAR,EAAc;IACdJ,GAAG,CAACpM,CAAJ,GAAQ,IAAItG,KAAJ,EAAR;IAEAoJ,WAAM,CAAC2J,QAAP,CAAgBF,SAAhB,EAA2BzB,QAA3B;IACAhI,WAAM,CAAC2D,SAAP,CAAiB8F,SAAjB,EAA4BzB,QAA5B;IAEAuB,YAAY;QACR,CAACC,aAAL,EAAoBA,aAAa,GAAGI,IAAI,CAACC,GAAL,EAAhB;UACdC,QAAQ,GAAGF,IAAI,CAACC,GAAL,KAAaL,aAA9B;;QAEIjB,KAAJ,EAAW;YACHwB,QAAQ,GAAGxB,KAAK,GAAGgB,YAAzB;MACAvJ,WAAM,CAACgK,SAAP,CAAiBF,QAAjB,EAA2BC,QAA3B;;;IAGFT,GAAG,CAACpM,CAAJ,GAAQ,IAAR,CAhBwB;GAA1B;CAJF;;AAyBA,MAAMoM,GAAG,GAAG,EAAZ;;AAEA,KAAK,MAAM7S,IAAX,IAAmBqO,UAAnB,EAA6B;QACrBmF,OAAO,GAAGxT,IAAI,CAACyT,OAAL,CAAa,WAAb,EAA0B,EAA1B,CAAhB;QACM;IAAE1B,KAAF;IAASD,KAAT;IAAgB4B;MAASrF,UAAQ,CAACrO,IAAD,CAAvC;QACMuR,QAAQ,GAAGC,IAAI,CAACmC,KAAL,CAAWnC,IAAI,CAACC,SAAL,CAAeM,KAAK,IAAI,EAAxB,CAAX,CAAjB;QACMH,IAAI,GAAGgB,UAAU,CAACrB,QAAD,EAAWO,KAAX,EAAkBe,GAAlB,CAAvB;QACMhB,IAAI,GAAG2B,OAAO,KAAK,GAAZ,GAAkB,MAAcjC,QAAhC,GAA2CQ,KAAxD;QACM6B,cAAc,GAAGjC,OAAO,CAACC,IAAD,EAAOC,IAAP,EAAaC,KAAb,CAA9B;EAEA3I,cAAQ,CAAE,yBAAwBnJ,IAAK,kBAAiB8R,KAAK,IAC3D,GAAI,IADE,EACG,YAAY;SAChB+B,OAAL,CAAa,CAAb;IACAC,YAAM,CAAC,gCAAD,EAAmC,kBAAkB;MACzDjB,GAAG,CAACI,IAAJ,GAAW,KAAX;YACMW,cAAc,CAAC,EAAD,CAApB;YACMA,cAAc,CAAC7B,KAAD,CAApB;KAHI,CAAN;IAMA2B,IAAI,CAACnT,GAAL,CAAS,CAAC,CAACuH,KAAD,EAAQtB,KAAR,EAAe6M,QAAf,CAAD,EAA2B3N,CAA3B,KAAiC;MACxC4D,QAAE,CAAE,QAAOxB,KAAM,QAAOtB,KAAM,WAAU6M,QAAS,eAA/C,EAA+D,UAAUU,IAAV,EAAgB;YAC3EC,KAAK,GAAGJ,cAAZ;YACIK,aAAa,GAAG1C,QAApB;QAEAzJ,KAAK,GAAGA,KAAK,CAACkD,KAAN,CAAY,GAAZ,CAAR;;eACOlD,KAAK,CAAC1H,MAAN,GAAe,CAAtB,EAAyB;gBACjBuB,GAAG,GAAGmG,KAAK,CAACoD,KAAN,EAAZ;UACA8I,KAAK,GAAGA,KAAK,CAACrS,GAAD,CAAb;UACAsS,aAAa,GAAGA,aAAa,CAACtS,GAAD,CAA7B;;;cAGIA,GAAG,GAAGmG,KAAK,CAAC,CAAD,CAAjB;cACMoM,QAAQ,GAAG,CAACxO,CAAD,GAAK2N,QAAL,GAAgBA,QAAQ,GAAGK,IAAI,CAAChO,CAAC,GAAG,CAAL,CAAJ,CAAY,CAAZ,CAA5C;QAEAiN,UAAU,CAAC,MAAM;UACfsB,aAAa,CAACtS,GAAD,CAAb,GAAqB6E,KAArB;UACAwN,KAAK,CAACrS,GAAD,CAAL,GAAa6E,KAAb;UACA+C,WAAM,CAACC,KAAP,CAAayK,aAAa,CAACtS,GAAD,CAA1B,EAAiCqS,KAAK,CAACrS,GAAD,CAAtC;UACAoS,IAAI,CAAClB,GAAG,CAACpM,CAAL,CAAJ;SAJQ,EAKPyN,QALO,CAAV;OAdA,CAAF;KADF;IAwBAC,WAAK,CAAC,0CAAD,EAA6C,kBAAkB;MAClEtB,GAAG,CAACI,IAAJ,GAAW,IAAX;YACMW,cAAc,CAAC,MAAD,CAApB;KAFG,CAAL;GAjCM,CAAR;;;;;;"}